"use strict";(()=>{var e={};e.id=714,e.ids=[714],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},4770:e=>{e.exports=require("crypto")},665:e=>{e.exports=require("dns")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},6005:e=>{e.exports=require("node:crypto")},9331:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var a={};t.r(a),t.d(a,{GET:()=>l,POST:()=>d,dynamic:()=>p});var n=t(9303),i=t(8716),s=t(670),o=t(7070),c=t(6299),u=t(5456);let p="force-dynamic";async function l(){let e=await (0,c.QN)();return o.NextResponse.json(e,{headers:{"Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate",Pragma:"no-cache",Expires:"0"}})}async function d(e){try{let{password:r,config:t}=await e.json(),a=e.cookies.get("corpepilates_session")?.value,n=!!a&&await (0,u.X7)(a),i=!!r&&await (0,u.Gv)(r);if(!n&&!i)return o.NextResponse.json({error:"No autorizado"},{status:401});if(await (0,c.Oh)(t))return o.NextResponse.json({success:!0,message:"Configuraci\xf3n guardada"});return o.NextResponse.json({error:"Error al guardar"},{status:500})}catch(e){return console.error("Error saving config:",e),o.NextResponse.json({error:"Error al guardar la configuraci\xf3n"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/config/route",pathname:"/api/admin/config",filename:"route",bundlePath:"app/api/admin/config/route"},resolvedPagePath:"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\api\\admin\\config\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:x}=f,h="/api/admin/config/route";function y(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},8867:(e,r,t)=>{t.d(r,{T4:()=>n,TD:()=>i,mH:()=>o,mr:()=>s,u_:()=>a});let a={site:{siteName:"Corpe Pilates",tagline:"Pilates Reformer para todos",instagram:"https://instagram.com/corpepilates",whatsapp:"5491161515110",email:"corpepilates@gmail.com",location:"Avenida Segurola 386, Floresta, CABA",deliveryMode:"pickup"},booking:{enabled:!0,recurring:[{dayOfWeek:2,slots:[{start:"18:00",end:"19:00"}]},{dayOfWeek:5,slots:[{start:"18:00",end:"19:00"}]}],exceptions:[]},products:[],services:[{id:"plan-1x",name:"Plan 1x Semana",description:"4 clases mensuales de Pilates Reformer. Ideal para iniciarte en la pr\xe1ctica y trabajar tu core, postura y fuerza general.",price:25e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1518611012118-696072aa579a?w=400&h=400&fit=crop"},{id:"plan-2x",name:"Plan 2x Semana",description:"8 clases mensuales de Pilates Reformer. Perfecto para progresar m\xe1s r\xe1pido y sentir resultados en pocas semanas.",price:4e4,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400&h=400&fit=crop"},{id:"plan-3x",name:"Plan 3x Semana",description:"12 clases mensuales de Pilates Reformer. M\xe1ximos resultados: mayor fuerza, flexibilidad y cuidado de tu columna.",price:55e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1599901860904-17e6ed7083a0?w=400&h=400&fit=crop"}]};function n(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){let[r,t]=e.split(":").map(Number);return 60*r+t}function s(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}function o(e,r){return s(i(e)+r)}},5456:(e,r,t)=>{t.d(r,{Bx:()=>x,Gv:()=>f,P:()=>m,P0:()=>l,TQ:()=>v,X7:()=>y,a2:()=>w,kt:()=>h,qD:()=>g,sp:()=>d});var a=t(8779),n=t(5245),i=t(4770),s=t.n(i);let o="corpepilates:admin_password",c="corpepilates:otp",u="corpepilates:session:";function p(){return(0,a.eI)({url:process.env.KV_REST_API_URL,token:process.env.KV_REST_API_TOKEN,cache:"no-store",automaticDeserialization:!0})}async function l(){try{return await p().get(o)}catch{return null}}async function d(e){try{return await p().set(o,e),!0}catch{return!1}}async function f(e){if(e===(process.env.ADMIN_PASSWORD||"corpepilates2024"))return!0;let r=await l();return!!r&&e===r}async function m(){let e=Math.random().toString().slice(2,8);return await p().set(c,e,{ex:600}),e}async function g(e,r=!1){try{let t=await p().get(c),a=String(t||""),n=String(e||"").trim();if(a&&a===n)return r&&await p().del(c),!0;return!1}catch(e){return console.error("Error verificando OTP:",e),!1}}async function x(){try{await p().del(c)}catch{}}async function h(){let e=s().randomBytes(32).toString("hex");return await p().set(u+e,{createdAt:Date.now()},{ex:432e3}),e}async function y(e){if(!e)return!1;try{return!!await p().get(u+e)}catch{return!1}}async function v(e){try{await p().del(u+e)}catch{}}async function w(e,r){let t=process.env.SMTP_USER,a=process.env.SMTP_PASS,i=process.env.SMTP_HOST||"smtp.gmail.com",s=parseInt(process.env.SMTP_PORT||"465");if(!t||!a)return{success:!1,error:"Email no configurado en el servidor"};try{let o=n.createTransport({host:i,port:s,secure:465===s,auth:{user:t,pass:a}});return await o.sendMail({from:`Corpe Pilates <${t}>`,to:e,subject:"C\xf3digo de verificaci\xf3n - Corpe Pilates Admin",html:`
        <div style="font-family: sans-serif; max-width: 400px; margin: 0 auto; padding: 20px;">
          <h2 style="color: #e85d5d; text-align: center;">Corpe Pilates</h2>
          <p style="text-align: center; color: #666;">Tu c\xf3digo de verificaci\xf3n es:</p>
          <div style="background: #f5f5f5; padding: 20px; text-align: center; border-radius: 10px; margin: 20px 0;">
            <span style="font-size: 32px; font-weight: bold; letter-spacing: 5px; color: #333;">${r}</span>
          </div>
          <p style="text-align: center; color: #999; font-size: 12px;">
            Este c\xf3digo expira en 10 minutos.<br>
            Si no solicitaste este c\xf3digo, ignor\xe1 este email.
          </p>
        </div>
      `}),{success:!0}}catch(e){return console.error("Error sending OTP email:",e),{success:!1,error:e instanceof Error?e.message:"Error desconocido"}}}},6299:(e,r,t)=>{t.d(r,{AU:()=>x,HG:()=>y,IF:()=>d,Oh:()=>l,QN:()=>p,Qv:()=>g,TR:()=>h,iD:()=>f,pF:()=>m});var a=t(8867),n=t(8779);let i="corpepilates:config",s="corpepilates:reservations",o="corpepilates:orders",c=null;function u(){if(c)return c;let e=process.env.KV_REST_API_URL,r=process.env.KV_REST_API_TOKEN;if(!e||!r)throw Error("Missing KV_REST_API_URL / KV_REST_API_TOKEN");return c=(0,n.eI)({url:e,token:r,cache:"no-store"})}async function p(){try{return await u().get(i)||a.u_}catch(e){return a.u_}}async function l(e){try{return await u().set(i,e),!0}catch(e){return console.error("Error saving config:",e),!1}}async function d(){try{return await u().get(s)||[]}catch{return[]}}async function f(e){try{let r=await d(),t=r.findIndex(r=>r.id===e.id);return t>=0?r[t]=e:r.push(e),await u().set(s,r),!0}catch(e){return console.error("Error saving reservation:",e),!1}}async function m(e){return(await d()).filter(r=>r.date===e&&"cancelled"!==r.status)}async function g(e){return(await d()).find(r=>r.id===e)||null}async function x(){try{return await u().get(o)||[]}catch{return[]}}async function h(e){try{let r=await x(),t=r.findIndex(r=>r.id===e.id);return t>=0?r[t]=e:r.push(e),await u().set(o,r),!0}catch(e){return console.error("Error saving order:",e),!1}}async function y(e){return(await x()).find(r=>r.id===e)||null}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,779,59,245],()=>t(9331));module.exports=a})();