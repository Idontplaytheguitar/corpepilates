"use strict";(()=>{var e={};e.id=402,e.ids=[402],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},9089:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var a={};t.r(a),t.d(a,{GET:()=>c,POST:()=>d});var n=t(9303),s=t(8716),o=t(670),i=t(7070),u=t(6299);async function c(){try{let e=(await (0,u.AU)()).sort((e,r)=>r.createdAt-e.createdAt);return i.NextResponse.json({orders:e})}catch(e){return console.error("Error getting orders:",e),i.NextResponse.json({orders:[]})}}async function d(e){try{let r=await e.json(),{orderId:t,deliveryStatus:a,slotIndex:n,slotCompleted:s}=r;if(!t)return i.NextResponse.json({error:"ID de orden requerido"},{status:400});let o=await (0,u.HG)(t);if(!o)return i.NextResponse.json({error:"Orden no encontrada"},{status:404});return void 0!==a&&(o.deliveryStatus=a),void 0!==n&&o.selectedSlots[n]&&(o.selectedSlots[n].status=r.slotStatus||(s?"completed":"pending")),await (0,u.TR)(o),i.NextResponse.json({success:!0,order:o})}catch(e){return console.error("Error updating order:",e),i.NextResponse.json({error:"Error al actualizar la orden"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/orders/route",pathname:"/api/admin/orders",filename:"route",bundlePath:"app/api/admin/orders/route"},resolvedPagePath:"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\api\\admin\\orders\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:f}=p,g="/api/admin/orders/route";function h(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},8867:(e,r,t)=>{t.d(r,{T4:()=>n,TD:()=>s,mH:()=>i,mr:()=>o,u_:()=>a});let a={site:{siteName:"Corpe Pilates",tagline:"Pilates Reformer para todos",instagram:"https://instagram.com/corpepilates",whatsapp:"5491161515110",email:"corpepilates@gmail.com",location:"Avenida Segurola 386, Floresta, CABA",deliveryMode:"pickup"},booking:{enabled:!0,recurring:[{dayOfWeek:2,slots:[{start:"18:00",end:"19:00"}]},{dayOfWeek:5,slots:[{start:"18:00",end:"19:00"}]}],exceptions:[]},products:[],services:[{id:"plan-1x",name:"Plan 1x Semana",description:"4 clases mensuales de Pilates Reformer. Ideal para iniciarte en la pr\xe1ctica y trabajar tu core, postura y fuerza general.",price:25e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1518611012118-696072aa579a?w=400&h=400&fit=crop"},{id:"plan-2x",name:"Plan 2x Semana",description:"8 clases mensuales de Pilates Reformer. Perfecto para progresar m\xe1s r\xe1pido y sentir resultados en pocas semanas.",price:4e4,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400&h=400&fit=crop"},{id:"plan-3x",name:"Plan 3x Semana",description:"12 clases mensuales de Pilates Reformer. M\xe1ximos resultados: mayor fuerza, flexibilidad y cuidado de tu columna.",price:55e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1599901860904-17e6ed7083a0?w=400&h=400&fit=crop"}]};function n(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function s(e){let[r,t]=e.split(":").map(Number);return 60*r+t}function o(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}function i(e,r){return o(s(e)+r)}},6299:(e,r,t)=>{t.d(r,{AU:()=>h,HG:()=>x,IF:()=>l,Oh:()=>p,QN:()=>d,Qv:()=>g,TR:()=>y,iD:()=>m,pF:()=>f});var a=t(8867),n=t(8779);let s="corpepilates:config",o="corpepilates:reservations",i="corpepilates:orders",u=null;function c(){if(u)return u;let e=process.env.KV_REST_API_URL,r=process.env.KV_REST_API_TOKEN;if(!e||!r)throw Error("Missing KV_REST_API_URL / KV_REST_API_TOKEN");return u=(0,n.eI)({url:e,token:r,cache:"no-store"})}async function d(){try{return await c().get(s)||a.u_}catch(e){return a.u_}}async function p(e){try{return await c().set(s,e),!0}catch(e){return console.error("Error saving config:",e),!1}}async function l(){try{return await c().get(o)||[]}catch{return[]}}async function m(e){try{let r=await l(),t=r.findIndex(r=>r.id===e.id);return t>=0?r[t]=e:r.push(e),await c().set(o,r),!0}catch(e){return console.error("Error saving reservation:",e),!1}}async function f(e){return(await l()).filter(r=>r.date===e&&"cancelled"!==r.status)}async function g(e){return(await l()).find(r=>r.id===e)||null}async function h(){try{return await c().get(i)||[]}catch{return[]}}async function y(e){try{let r=await h(),t=r.findIndex(r=>r.id===e.id);return t>=0?r[t]=e:r.push(e),await c().set(i,r),!0}catch(e){return console.error("Error saving order:",e),!1}}async function x(e){return(await h()).find(r=>r.id===e)||null}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,779,59],()=>t(9089));module.exports=a})();