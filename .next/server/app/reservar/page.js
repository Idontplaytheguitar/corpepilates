(()=>{var e={};e.id=277,e.ids=[277],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},96316:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(34229),t(48622),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["reservar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34229)),"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\reservar\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48622)),"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\reservar\\page.tsx"],m="/reservar/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/reservar/page",pathname:"/reservar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94120:(e,s,t)=>{Promise.resolve().then(t.bind(t,88985))},86333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},77506:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},77636:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},42887:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},79635:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},88985:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var r=t(10326),a=t(17577),i=t(35047),l=t(37358),n=t(86333),o=t(77636),c=t(48998);let d=(0,t(62881).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var m=t(77506),x=t(79635),u=t(5932),h=t(41291),p=t(42887),g=t(28916),f=t(80052),j=t(90434);function b(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function N(e){let s=e.replace(/[\s\-\(\)\.]/g,"");return/^\+?\d{8,15}$/.test(s)}function v(){(0,i.useSearchParams)().get("servicio");let[e,s]=(0,a.useState)([]),[t,v]=(0,a.useState)(null),[y,w]=(0,a.useState)([]),[k,Z]=(0,a.useState)([]),[S,P]=(0,a.useState)(!1),[C,D]=(0,a.useState)(null),[q,M]=(0,a.useState)(""),[_,T]=(0,a.useState)(""),[E,A]=(0,a.useState)([]),[R,$]=(0,a.useState)(!1),[L,z]=(0,a.useState)(new Date),[F,O]=(0,a.useState)(1),[I,U]=(0,a.useState)({name:"",email:"",phone:""}),[G,H]=(0,a.useState)(!1),[V,Y]=(0,a.useState)(""),J=async()=>{if(C&&q&&_){if(!I.name||!I.email||!I.phone){Y("Complet\xe1 todos los campos");return}if(!b(I.email)){Y("Ingres\xe1 un email v\xe1lido");return}if(!N(I.phone)){Y("Ingres\xe1 un n\xfamero de tel\xe9fono v\xe1lido (8-15 d\xedgitos)");return}H(!0),Y("");try{let e=await fetch("/api/booking/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:C.id,date:q,time:_,customer:I})}),s=await e.json();s.init_point?window.location.href=s.init_point:Y(s.error||"Error al crear la reserva")}catch{Y("Error de conexi\xf3n")}H(!1)}},W=e=>{let s=new Date;if(s.setHours(0,0,0,0),e<s)return!1;let t=e.toISOString().split("T")[0],r=e.getDay(),a=y.find(e=>e.dayOfWeek===r);if(!a||0===a.slots.length)return!1;let i=k.find(e=>e.date===t);return!i||!i.isBlocked},B=e=>new Date(e+"T12:00:00").toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"});return S?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-cream-100 pt-24 pb-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(j.default,{href:"/#servicios",className:"inline-flex items-center gap-2 text-rose-500 hover:text-rose-600 mb-4",children:[r.jsx(n.Z,{className:"w-4 h-4"}),"Volver a servicios"]}),r.jsx("h1",{className:"font-display text-3xl sm:text-4xl font-semibold text-rose-800",children:"Reservar Turno"}),r.jsx("p",{className:"text-nude-500 mt-2",children:"Eleg\xed el servicio, fecha y horario que m\xe1s te convenga"}),t?.location&&(0,r.jsxs)("p",{className:"text-sage-600 mt-2 flex items-center gap-1",children:[r.jsx(o.Z,{className:"w-4 h-4"}),t.location]})]}),r.jsx("div",{className:"flex gap-2 mb-8",children:[1,2,3].map(e=>r.jsx("div",{className:`flex-1 h-2 rounded-full transition-colors ${F>=e?"bg-rose-500":"bg-cream-200"}`},e))}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[1===F&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h2",{className:"font-display text-xl font-semibold text-rose-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"w-8 h-8 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 text-sm font-bold",children:"1"}),"Eleg\xed un servicio"]}),r.jsx("div",{className:"grid gap-4",children:e.map(e=>(0,r.jsxs)("button",{onClick:()=>{D(e),O(2)},className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left ${C?.id===e.id?"border-rose-500 bg-rose-50":"border-cream-200 hover:border-rose-300"}`,children:[e.image?r.jsx("img",{src:e.image,alt:"",className:"w-16 h-16 rounded-lg object-cover"}):r.jsx("div",{className:"w-16 h-16 rounded-lg bg-sage-100 flex items-center justify-center text-2xl",children:"\uD83D\uDC86"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-rose-800",children:e.name}),r.jsx("p",{className:"text-sm text-nude-500 line-clamp-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("span",{className:"text-rose-600 font-semibold",children:(0,f.T4)(e.price)}),(0,r.jsxs)("span",{className:"text-nude-400 text-sm flex items-center gap-1",children:[r.jsx(c.Z,{className:"w-3 h-3"}),e.durationMinutes||60," min"]})]})]}),r.jsx(d,{className:"w-5 h-5 text-rose-400"})]},e.id))}),0===e.length&&r.jsx("div",{className:"text-center py-12 text-nude-400",children:"No hay servicios disponibles para reservar en este momento."})]}),2===F&&C&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("button",{onClick:()=>O(1),className:"text-rose-500 hover:text-rose-600 text-sm flex items-center gap-1 mb-4",children:[r.jsx(n.Z,{className:"w-4 h-4"}),"Cambiar servicio"]}),(0,r.jsxs)("div",{className:"bg-sage-50 rounded-xl p-4 mb-6 flex items-center gap-4",children:[C.image?r.jsx("img",{src:C.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded-lg bg-sage-200 flex items-center justify-center",children:"\uD83D\uDC86"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-sage-800",children:C.name}),(0,r.jsxs)("p",{className:"text-sm text-sage-600",children:[(0,f.T4)(C.price)," \xb7 ",C.durationMinutes||60," min"]})]})]}),(0,r.jsxs)("h2",{className:"font-display text-xl font-semibold text-rose-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"w-8 h-8 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 text-sm font-bold",children:"2"}),"Eleg\xed fecha y horario"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("button",{onClick:()=>z(new Date(L.getFullYear(),L.getMonth()-1)),className:"p-2 hover:bg-cream-100 rounded-lg",children:r.jsx(n.Z,{className:"w-5 h-5 text-rose-600"})}),r.jsx("span",{className:"font-medium text-rose-800 capitalize",children:L.toLocaleDateString("es-AR",{month:"long",year:"numeric"})}),r.jsx("button",{onClick:()=>z(new Date(L.getFullYear(),L.getMonth()+1)),className:"p-2 hover:bg-cream-100 rounded-lg",children:r.jsx(d,{className:"w-5 h-5 text-rose-600"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:[["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"].map(e=>r.jsx("div",{className:"py-2 text-nude-500 font-medium",children:e},e)),(e=>{let s=e.getFullYear(),t=e.getMonth(),r=new Date(s,t,1),a=new Date(s,t+1,0),i=[],l=(r.getDay()+6)%7;for(let e=0;e<l;e++)i.push(null);for(let e=1;e<=a.getDate();e++)i.push(new Date(s,t,e));return i})(L).map((e,s)=>{if(!e)return r.jsx("div",{},s);let t=e.toISOString().split("T")[0],a=W(e),i=q===t;return r.jsx("button",{onClick:()=>{a&&(M(t),T(""))},disabled:!a,className:`py-2 rounded-lg text-sm transition-all ${i?"bg-rose-500 text-white font-semibold":a?"hover:bg-rose-100 text-rose-800":"text-nude-300 cursor-not-allowed"}`,children:e.getDate()},s)})]})]}),r.jsx("div",{children:q?(0,r.jsxs)(r.Fragment,{children:[r.jsx("h3",{className:"font-medium text-rose-800 mb-3 capitalize",children:B(q)}),R?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(m.Z,{className:"w-6 h-6 text-rose-400 animate-spin"})}):E.length>0?r.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-64 overflow-y-auto",children:E.map(e=>r.jsx("button",{onClick:()=>T(e),className:`py-2 px-3 rounded-lg text-sm font-medium transition-all ${_===e?"bg-rose-500 text-white":"bg-cream-100 text-rose-700 hover:bg-cream-200"}`,children:e},e))}):r.jsx("div",{className:"text-center py-8 text-nude-400",children:"No hay horarios disponibles para esta fecha"})]}):r.jsx("div",{className:"flex items-center justify-center h-full text-nude-400",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(l.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Seleccion\xe1 una fecha"})]})})})]}),q&&_&&(0,r.jsxs)("button",{onClick:()=>O(3),className:"w-full mt-6 py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:["Continuar",r.jsx(d,{className:"w-5 h-5"})]})]}),3===F&&C&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("button",{onClick:()=>O(2),className:"text-rose-500 hover:text-rose-600 text-sm flex items-center gap-1 mb-4",children:[r.jsx(n.Z,{className:"w-4 h-4"}),"Cambiar fecha/horario"]}),(0,r.jsxs)("div",{className:"bg-sage-50 rounded-xl p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[C.image?r.jsx("img",{src:C.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):r.jsx("div",{className:"w-12 h-12 rounded-lg bg-sage-200 flex items-center justify-center",children:"\uD83D\uDC86"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-sage-800",children:C.name}),(0,r.jsxs)("p",{className:"text-sm text-sage-600",children:[C.durationMinutes||60," minutos"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-sage-700",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(l.Z,{className:"w-4 h-4"}),B(q)]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(c.Z,{className:"w-4 h-4"}),_,"hs"]})]}),t?.location&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm text-sage-600 mt-2",children:[r.jsx(o.Z,{className:"w-4 h-4"}),t.location]}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-sage-200 flex justify-between items-center",children:[r.jsx("span",{className:"text-sage-600",children:"Total a pagar"}),r.jsx("span",{className:"text-xl font-bold text-sage-800",children:(0,f.T4)(C.price)})]})]}),(0,r.jsxs)("h2",{className:"font-display text-xl font-semibold text-rose-800 mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"w-8 h-8 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 text-sm font-bold",children:"3"}),"Tus datos"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:[r.jsx(x.Z,{className:"w-4 h-4 inline mr-1"}),"Nombre completo"]}),r.jsx("input",{type:"text",value:I.name,onChange:e=>U({...I,name:e.target.value}),placeholder:"Tu nombre",className:"w-full px-4 py-3 rounded-xl border border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200 outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:[r.jsx(u.Z,{className:"w-4 h-4 inline mr-1"}),"Email"]}),r.jsx("input",{type:"email",value:I.email,onChange:e=>U({...I,email:e.target.value}),placeholder:"tu@email.com",className:`w-full px-4 py-3 rounded-xl border outline-none transition-all ${I.email&&!b(I.email)?"border-red-400 focus:border-red-500 focus:ring-2 focus:ring-red-200 bg-red-50":"border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200"}`}),I.email&&!b(I.email)&&(0,r.jsxs)("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[r.jsx(h.Z,{className:"w-3 h-3"}),"Email inv\xe1lido"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:[r.jsx(p.Z,{className:"w-4 h-4 inline mr-1"}),"Tel\xe9fono / WhatsApp"]}),r.jsx("input",{type:"tel",value:I.phone,onChange:e=>U({...I,phone:e.target.value}),placeholder:"11 1234 5678",className:`w-full px-4 py-3 rounded-xl border outline-none transition-all ${I.phone&&!N(I.phone)?"border-red-400 focus:border-red-500 focus:ring-2 focus:ring-red-200 bg-red-50":"border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200"}`}),I.phone&&!N(I.phone)&&(0,r.jsxs)("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[r.jsx(h.Z,{className:"w-3 h-3"}),"N\xfamero inv\xe1lido (8-15 d\xedgitos)"]})]})]}),V&&r.jsx("p",{className:"mt-4 text-rose-500 text-sm text-center",children:V}),r.jsx("button",{onClick:J,disabled:G||!I.name||!I.email||!I.phone||!b(I.email)||!N(I.phone),className:"w-full mt-6 py-4 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-semibold transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:G?(0,r.jsxs)(r.Fragment,{children:[r.jsx(m.Z,{className:"w-5 h-5 animate-spin"}),"Procesando..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(g.Z,{className:"w-5 h-5"}),"Pagar y Confirmar Reserva"]})}),r.jsx("p",{className:"mt-4 text-center text-sm text-nude-500",children:"Ser\xe1s redirigido a MercadoPago para completar el pago de forma segura"})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-cream-100 pt-24 pb-12 px-4",children:r.jsx("div",{className:"max-w-2xl mx-auto text-center",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r.jsx(l.Z,{className:"w-16 h-16 text-nude-300 mx-auto mb-4"}),r.jsx("h1",{className:"font-display text-2xl font-semibold text-rose-800 mb-2",children:"Reservas no disponibles"}),r.jsx("p",{className:"text-nude-500 mb-6",children:"El sistema de reservas online no est\xe1 habilitado en este momento."}),(0,r.jsxs)(j.default,{href:"/",className:"inline-flex items-center gap-2 text-rose-500 hover:text-rose-600",children:[r.jsx(n.Z,{className:"w-4 h-4"}),"Volver al inicio"]})]})})})}function y(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-cream-100 pt-24 pb-12 px-4 flex items-center justify-center",children:r.jsx(m.Z,{className:"w-8 h-8 text-rose-400 animate-spin"})}),children:r.jsx(v,{})})}},34229:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\agusk\Desktop\Stuff\Projects\PilatesReformer\src\app\reservar\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,197,454,159],()=>t(96316));module.exports=r})();