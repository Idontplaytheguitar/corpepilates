(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6005:e=>{"use strict";e.exports=require("node:crypto")},3228:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),t(4753),t(8622),t(5866);var a=t(3191),r=t(8716),l=t(7922),n=t.n(l),o=t(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let c=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4753)),"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8622)),"C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\agusk\\Desktop\\Stuff\\Projects\\PilatesReformer\\src\\app\\admin\\page.tsx"],m="/admin/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2062:(e,s,t)=>{Promise.resolve().then(t.bind(t,24))},2933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1890:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9183:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7506:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},24:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(326),r=t(7577),l=t(7506),n=t(2881);let o=(0,n.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),i=(0,n.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),c=(0,n.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var d=t(2933),m=t(1291);let x=(0,n.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),u=(0,n.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),h=(0,n.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var p=t(5932),g=t(3855),b=t(7358),j=t(4019),f=t(8998),v=t(8916);let N=(0,n.Z)("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),y=(0,n.Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),w=(0,n.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),k=(0,n.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),S=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),C=(0,n.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var D=t(52),P=t(1890),T=t(9183);let Z=(0,n.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),A=["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"],E=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function M({value:e,onChange:s,minDate:t}){let[l,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(()=>e?new Date(e+"T12:00:00"):new Date),c=(0,r.useRef)(null),d=e=>{if(!t)return!1;let s=new Date(t);return s.setHours(0,0,0,0),e<s},m=e=>{d(e)||(s(e.toISOString().split("T")[0]),n(!1))};return(0,a.jsxs)("div",{ref:c,className:"relative flex-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>n(!l),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all duration-200 text-left
                   ${l?"border-rose-500 ring-4 ring-rose-100":"border-cream-200 hover:border-rose-300"}
                   bg-white hover:bg-rose-50/50`,children:[a.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center transition-all duration-200 shadow-sm
                        ${l?"bg-rose-500":"bg-rose-100 hover:bg-rose-200"}`,children:a.jsx(b.Z,{className:`w-5 h-5 ${l?"text-white":"text-rose-500"}`})}),a.jsx("span",{className:`font-medium ${e?"text-rose-800":"text-nude-400"}`,children:e?e?new Date(e+"T12:00:00").toLocaleDateString("es-AR",{weekday:"short",day:"numeric",month:"short"}):"":"Seleccionar fecha"})]}),l&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-cream-200 p-4 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("button",{type:"button",onClick:()=>i(new Date(o.getFullYear(),o.getMonth()-1)),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:a.jsx(P.Z,{className:"w-5 h-5 text-rose-600"})}),(0,a.jsxs)("span",{className:"font-semibold text-rose-800",children:[E[o.getMonth()]," ",o.getFullYear()]}),a.jsx("button",{type:"button",onClick:()=>i(new Date(o.getFullYear(),o.getMonth()+1)),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:a.jsx(T.Z,{className:"w-5 h-5 text-rose-600"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs mb-2",children:A.map(e=>a.jsx("div",{className:"py-1 text-nude-500 font-medium",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let e=o.getFullYear(),s=o.getMonth(),t=new Date(e,s,1),a=new Date(e,s+1,0),r=[],l=(t.getDay()+6)%7;for(let e=0;e<l;e++)r.push(null);for(let t=1;t<=a.getDate();t++)r.push(new Date(e,s,t));return r})().map((s,t)=>{if(!s)return a.jsx("div",{},t);let r=e===s.toISOString().split("T")[0],l=d(s),n=new Date().toDateString()===s.toDateString();return a.jsx("button",{type:"button",onClick:()=>m(s),disabled:l,className:`py-2 rounded-lg text-sm font-medium transition-all ${r?"bg-rose-500 text-white shadow-md":l?"text-nude-300 cursor-not-allowed":n?"bg-sage-100 text-sage-700 hover:bg-sage-200":"hover:bg-rose-100 text-rose-800"}`,children:s.getDate()},t)})})]})]})}let $=Array.from({length:24},(e,s)=>s);function I(e){return`${Math.floor(e/2).toString().padStart(2,"0")}:${(e%2*30).toString().padStart(2,"0")}`}function q(e){let[s,t]=e.split(":").map(Number);return 2*s+Math.floor(t/30)}function O(e){let s=Array(48).fill(!1);return e.forEach(e=>{let t=q(e.start),a=q(e.end);for(let e=t;e<a&&e<48;e++)s[e]=!0}),s}function R(e){let s=[],t=null;for(let a=0;a<=48;a++)e[a]&&null===t?t=a:e[a]||null===t||(s.push({start:I(t),end:I(a)}),t=null);return s}function L({slots:e,onChange:s}){let[t,l]=(0,r.useState)(()=>O(e)),n=e=>{let a=[...t];a[e]=!a[e],l(a),s(R(a))},o=e=>{let a=2*e,r=a+1,n=t[a]&&t[r],o=[...t];o[a]=!n,o[r]=!n,l(o),s(R(o))},i=(e,a)=>{let r=[...t];for(let s=e;s<a;s++)r[2*s]=!0,r[2*s+1]=!0;l(r),s(R(r))},c=$.filter(e=>e>=7&&e<22);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>i(8,12),className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-cream-100 text-nude-600 hover:bg-cream-200 transition-colors",children:"Ma\xf1ana (08-12)"}),a.jsx("button",{onClick:()=>i(14,18),className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-cream-100 text-nude-600 hover:bg-cream-200 transition-colors",children:"Tarde (14-18)"}),a.jsx("button",{onClick:()=>{let e=[...t];for(let s=7;s<22;s++)e[2*s]=!0,e[2*s+1]=!0;l(e),s(R(e))},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-sage-100 text-sage-700 hover:bg-sage-200 transition-colors",children:"Todo el d\xeda"}),(0,a.jsxs)("button",{onClick:()=>{l(Array(48).fill(!1)),s([])},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-rose-100 text-rose-600 hover:bg-rose-200 transition-colors flex items-center gap-1",children:[a.jsx(S,{className:"w-3 h-3"}),"Limpiar"]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-[400px] overflow-y-auto pr-1 scrollbar-thin",children:c.map(e=>{let s=2*e,r=s+1,l=t[s],i=t[r],c=l&&i,d=`${e.toString().padStart(2,"0")}:00`;return(0,a.jsxs)("div",{className:"bg-cream-50 rounded-lg border border-cream-200 p-3 hover:border-rose-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("button",{onClick:()=>o(e),className:`text-sm font-semibold transition-colors ${c?"text-sage-700":l||i?"text-rose-700":"text-nude-500"}`,children:d}),a.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-sage-500":l||i?"bg-rose-400":"bg-cream-300"}`})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>n(s),className:`flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ${l?"bg-sage-400 text-white shadow-sm hover:bg-sage-500":"bg-cream-100 text-nude-500 hover:bg-cream-200"}`,children:[e.toString().padStart(2,"0"),":00"]}),(0,a.jsxs)("button",{onClick:()=>n(r),className:`flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ${i?"bg-sage-400 text-white shadow-sm hover:bg-sage-500":"bg-cream-100 text-nude-500 hover:bg-cream-200"}`,children:[e.toString().padStart(2,"0"),":30"]})]})]},e)})}),(0,a.jsxs)("div",{className:"text-xs text-nude-400 flex items-center gap-4 pt-2 border-t border-cream-200",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 bg-sage-400 rounded"})," Activo"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 bg-cream-200 rounded"})," Inactivo"]})]})]})}function _({blockedSlots:e,recurringSlots:s,reservedSlots:t=[],onChange:l}){let n=O(s),o=O(t),[i,c]=(0,r.useState)(()=>O(e)),d=e=>{if(!n[e]||o[e])return;let s=[...i];s[e]=!s[e],c(s),l(R(s))},m=$.filter(e=>{let s=2*e;return n[s]||n[s+1]});return 0===m.length?a.jsx("div",{className:"text-sm text-nude-400 text-center py-4",children:"No hay horarios laborables configurados para este d\xeda"}):(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-xs text-nude-500 font-medium",children:"Toc\xe1 los horarios que quer\xe9s bloquear (se pondr\xe1n rojos)"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 max-h-[300px] overflow-y-auto pr-1 scrollbar-thin",children:m.map(e=>{let s=2*e,t=s+1,r=n[s],l=n[t],c=o[s],m=o[t],x=i[s],u=i[t];return(0,a.jsxs)("div",{className:"bg-cream-50 rounded-lg border border-cream-200 p-2",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-nude-600 mb-1.5",children:[e.toString().padStart(2,"0"),":00"]}),(0,a.jsxs)("div",{className:"flex gap-1.5",children:[r&&a.jsx("button",{onClick:()=>d(s),disabled:c,className:`flex-1 py-1.5 px-1 rounded text-[11px] font-medium transition-all ${c?"bg-amber-400 text-white cursor-not-allowed":x?"bg-rose-400 text-white hover:bg-rose-500":"bg-sage-400 text-white hover:bg-sage-500"}`,children:":00"}),l&&a.jsx("button",{onClick:()=>d(t),disabled:m,className:`flex-1 py-1.5 px-1 rounded text-[11px] font-medium transition-all ${m?"bg-amber-400 text-white cursor-not-allowed":u?"bg-rose-400 text-white hover:bg-rose-500":"bg-sage-400 text-white hover:bg-sage-500"}`,children:":30"})]})]},e)})}),(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2 pt-2 border-t border-cream-200",children:[(0,a.jsxs)("div",{className:"flex gap-3 text-xs flex-wrap",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 bg-sage-400 rounded"})," Trabajando"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 bg-rose-400 rounded"})," Bloqueado"]}),t.length>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 bg-amber-400 rounded"})," Reservado"]})]}),e.length>0&&(0,a.jsxs)("button",{onClick:()=>{c(Array(48).fill(!1)),l([])},className:"text-xs text-rose-500 hover:text-rose-700 flex items-center gap-1",children:[a.jsx(S,{className:"w-3 h-3"}),"Quitar bloqueos"]})]})]})}function z({recurring:e,exceptions:s,reservations:t=[],onUpdateRecurring:l,onUpdateExceptions:n}){let[o,i]=(0,r.useState)("recurring"),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(1),u=s=>{let t=e.find(e=>e.dayOfWeek===s);return t?.slots||[]},h=e=>t.filter(s=>s.date===e&&("confirmed"===s.status||"pending"===s.status)).map(e=>({start:e.time,end:e.endTime})),p=(s,t)=>{let a=e.filter(e=>e.dayOfWeek!==s);t.length>0?l([...a,{dayOfWeek:s,slots:t}]):l(a)},v=(e,t)=>{n(s.map(s=>s.date===e?{...s,...t}:s))},N=e=>{n(s.filter(s=>s.date!==e))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>i("recurring"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${"recurring"===o?"bg-rose-500 text-white":"bg-cream-100 text-nude-600 hover:bg-cream-200"}`,children:[a.jsx(f.Z,{className:"w-4 h-4 inline mr-2"}),"Horarios semanales"]}),(0,a.jsxs)("button",{onClick:()=>i("exceptions"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${"exceptions"===o?"bg-rose-500 text-white":"bg-cream-100 text-nude-600 hover:bg-cream-200"}`,children:[a.jsx(b.Z,{className:"w-4 h-4 inline mr-2"}),"D\xedas especiales (",s.length,")"]})]}),"recurring"===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-nude-500",children:"Seleccion\xe1 un d\xeda y arrastr\xe1 sobre la grilla para marcar los horarios de atenci\xf3n."}),a.jsx("div",{className:"flex flex-wrap gap-2",children:D.sb.map(e=>{let s=u(e.id).length>0;return(0,a.jsxs)("button",{onClick:()=>x(e.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m===e.id?"bg-rose-500 text-white":s?"bg-sage-100 text-sage-700 hover:bg-sage-200":"bg-cream-100 text-nude-500 hover:bg-cream-200"}`,children:[e.short,s&&m!==e.id&&a.jsx("span",{className:"ml-1 w-2 h-2 bg-sage-500 rounded-full inline-block"})]},e.id)})}),(0,a.jsxs)("div",{className:"bg-cream-50 rounded-xl p-4 border border-cream-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h4",{className:"font-medium text-rose-800",children:D.sb.find(e=>e.id===m)?.name}),(0,a.jsxs)("button",{onClick:()=>{let s=u(m),t=e.filter(e=>0===e.dayOfWeek||6===e.dayOfWeek);for(let e=1;e<=5;e++)s.length>0&&t.push({dayOfWeek:e,slots:[...s]});l(t)},className:"text-xs px-3 py-1.5 bg-sage-100 text-sage-700 rounded-lg hover:bg-sage-200 flex items-center gap-1",children:[a.jsx(Z,{className:"w-3 h-3"}),"Copiar a Lun-Vie"]})]}),a.jsx(L,{slots:u(m),onChange:e=>p(m,e)})]}),(0,a.jsxs)("div",{className:"text-sm text-nude-500 bg-cream-50 rounded-lg p-3 border border-cream-200",children:["\uD83D\uDCA1 ",a.jsx("strong",{children:"Tip:"})," Hac\xe9 click y arrastr\xe1 para seleccionar rangos. Volv\xe9 a hacer click en \xe1reas seleccionadas para deseleccionar."]})]}),"exceptions"===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-nude-500",children:"Agreg\xe1 d\xedas especiales donde el horario sea diferente al habitual (feriados, vacaciones, horarios especiales)."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(M,{value:c,onChange:d,minDate:new Date}),(0,a.jsxs)("button",{type:"button",onClick:()=>{c&&(s.find(e=>e.date===c)||(n([...s,{date:c,slots:[],isBlocked:!1}]),d("")))},disabled:!c,className:"px-6 py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 hover:shadow-lg hover:shadow-rose-200 disabled:opacity-50 disabled:hover:shadow-none disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all duration-200",children:[a.jsx(g.Z,{className:"w-5 h-5"}),"Agregar"]})]}),(0,a.jsxs)("div",{className:"text-sm bg-amber-50 text-amber-800 rounded-lg p-3 border border-amber-200",children:["⚠️ ",a.jsx("strong",{children:"Importante:"})," En los d\xedas laborables, seleccion\xe1 las horas que ",a.jsx("strong",{children:"NO"})," vas a trabajar para bloquearlas. El horario recurrente se muestra en verde, y lo que selecciones se bloquear\xe1 (rojo)."]}),0===s.length?a.jsx("div",{className:"text-center py-8 text-nude-400 bg-cream-50 rounded-xl",children:"No hay d\xedas especiales configurados"}):a.jsx("div",{className:"space-y-3",children:s.sort((e,s)=>e.date.localeCompare(s.date)).map(e=>{let s=new Date(e.date+"T12:00:00"),t=s.getDay(),r=u(t);return(0,a.jsxs)("div",{className:`rounded-xl border overflow-hidden ${e.isBlocked?"border-rose-200 bg-rose-50":"border-cream-200 bg-white"}`,children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 gap-2 border-b border-cream-200",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("span",{className:"font-medium text-rose-800 capitalize",children:s.toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"})}),0===r.length&&!e.isBlocked&&a.jsx("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-0.5 rounded w-fit",children:"Sin horario recurrente"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.isBlocked,onChange:s=>v(e.date,{isBlocked:s.target.checked,slots:[]}),className:"rounded border-cream-300 text-rose-500"}),a.jsx("span",{className:"text-rose-600",children:"No laborable"})]}),a.jsx("button",{onClick:()=>N(e.date),className:"p-1.5 text-rose-400 hover:text-rose-600 hover:bg-rose-100 rounded-lg",title:"Eliminar excepci\xf3n",children:a.jsx(j.Z,{className:"w-4 h-4"})})]})]}),!e.isBlocked&&r.length>0&&a.jsx("div",{className:"p-3",children:a.jsx(_,{blockedSlots:e.slots,recurringSlots:r,reservedSlots:h(e.date),onChange:s=>v(e.date,{slots:s})})}),!e.isBlocked&&0===r.length&&(0,a.jsxs)("div",{className:"p-3 text-sm text-nude-500",children:["Este d\xeda no tiene horario recurrente configurado. Configur\xe1 primero el horario semanal para ",D.sb.find(e=>e.id===t)?.name?.toLowerCase(),"."]})]},e.date)})})]})]})}function F(){let[e,s]=(0,r.useState)(!1),[t,n]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[P,T]=(0,r.useState)(!1),[Z,A]=(0,r.useState)(!0),[E,M]=(0,r.useState)(!1),[$,I]=(0,r.useState)(!1),[q,O]=(0,r.useState)(!1),[R,L]=(0,r.useState)(""),[_,F]=(0,r.useState)(""),[U,B]=(0,r.useState)(""),[G,W]=(0,r.useState)(""),[Y,K]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(""),[ee,es]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(!1),[er,el]=(0,r.useState)(D.u_.site),[en,eo]=(0,r.useState)(D.u_.products),[ei,ec]=(0,r.useState)(D.u_.services),[ed,em]=(0,r.useState)(D.u_.booking),[ex,eu]=(0,r.useState)([]),[eh,ep]=(0,r.useState)([]),[eg,eb]=(0,r.useState)("site"),[ej,ef]=(0,r.useState)(null),[ev,eN]=(0,r.useState)(null),[ey,ew]=(0,r.useState)(!1),[ek,eS]=(0,r.useState)(!1),[eC,eD]=(0,r.useState)("idle"),[eP,eT]=(0,r.useState)(!1),[eZ,eA]=(0,r.useState)({connected:!1}),[eE,eM]=(0,r.useState)(!1),[e$,eI]=(0,r.useState)({enabled:!0,percentage:5,developmentPaid:!1}),[eq,eO]=(0,r.useState)(!1),eR=async e=>{e.preventDefault(),(await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"login",password:t})})).ok?(s(!0),k(t),C("")):C("Contrase\xf1a incorrecta")},eL=async()=>{await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"logout"})}),s(!1),k(""),n("")},e_=async()=>{eS(!0),eD("idle");try{let e=await fetch("/api/admin/config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({config:{site:er,products:en,services:ei,booking:ed}})});if(e.ok)eD("success"),eT(!1),setTimeout(()=>eD("idle"),3e3);else{let s=await e.json();console.error("Save error:",s.error),eD("error")}}catch(e){console.error("Save error:",e),eD("error")}finally{eS(!1)}},ez=()=>eT(!0),eF=(e,s)=>{let t=[...en];t[e]={...t[e],...s},eo(t),ez()},eV=e=>{eo(en.filter((s,t)=>t!==e)),ez()},eJ=(e,s)=>{let t=[...ei];t[e]={...t[e],...s},ec(t),ez()},eU=e=>{ec(ei.filter((s,t)=>t!==e)),ez()};return Z?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 to-cream-100 p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(l.Z,{className:"w-10 h-10 text-rose-500 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-nude-500",children:"Verificando sesi\xf3n..."})]})}):e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-cream-100 pt-24 pb-12 px-4",children:a.jsx("div",{className:"max-w-5xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-rose-600 text-white p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"font-display text-2xl sm:text-3xl font-semibold",children:"Panel de Administraci\xf3n"}),a.jsx("p",{className:"text-rose-200 mt-1",children:"Configur\xe1 tu tienda"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,a.jsxs)("button",{onClick:e_,disabled:ek||!eP||!ey,className:`flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 sm:px-6 py-3 rounded-xl font-semibold transition-all ${"success"===eC?"bg-green-500 text-white":"error"===eC?"bg-red-500 text-white":eP?"bg-white text-rose-600 hover:bg-rose-50":"bg-rose-400 text-rose-200 cursor-not-allowed"}`,children:[ek?a.jsx(l.Z,{className:"w-5 h-5 animate-spin"}):"success"===eC?a.jsx(d.Z,{className:"w-5 h-5"}):"error"===eC?a.jsx(m.Z,{className:"w-5 h-5"}):a.jsx(x,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:ek?"Guardando...":"success"===eC?"\xa1Guardado!":"error"===eC?"Error":"Guardar Cambios"}),a.jsx("span",{className:"sm:hidden",children:ek?"...":"success"===eC?"✓":"error"===eC?"!":"Guardar"})]}),a.jsx("button",{onClick:eL,className:"p-3 rounded-xl bg-rose-500 hover:bg-rose-400 transition-colors",title:"Cerrar sesi\xf3n",children:a.jsx(u,{className:"w-5 h-5"})})]})]}),eP&&(0,a.jsxs)("div",{className:"bg-amber-50 border-b border-amber-200 px-6 py-3 flex items-center gap-2 text-amber-700",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Ten\xe9s cambios sin guardar"})]}),a.jsx("div",{className:"overflow-x-auto shadow-sm mt-2 scrollbar-thin",children:a.jsx("div",{className:"flex border-b border-cream-200 min-w-max",children:["site","products","services","booking","pedidos","mercadopago"].map(e=>(0,a.jsxs)("button",{onClick:()=>eb(e),className:`flex-1 py-4 px-4 font-medium transition-colors whitespace-nowrap ${eg===e?"text-rose-600 border-b-2 border-rose-500 bg-rose-50":"text-nude-500 hover:text-rose-500"}`,children:["site"===e&&"⚙️ Negocio","products"===e&&"\uD83D\uDECD️ Productos","services"===e&&"\uD83D\uDC86 Servicios","booking"===e&&"\uD83D\uDCC5 Reservas","pedidos"===e&&"\uD83D\uDCE6 Pedidos","mercadopago"===e&&"\uD83D\uDCB3 MercadoPago"]},e))})}),(0,a.jsxs)("div",{className:"p-6",children:["site"===eg&&(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Informaci\xf3n de tu Negocio"}),a.jsx(V,{label:"Nombre de la p\xe1gina",help:"El nombre que aparece en el logo y t\xedtulo",value:er.siteName,onChange:e=>{el({...er,siteName:e}),ez()},placeholder:"Ej: Corpe Pilates"}),a.jsx(V,{label:"Slogan",help:"Frase corta debajo del nombre",value:er.tagline,onChange:e=>{el({...er,tagline:e}),ez()},placeholder:"Ej: Belleza Natural"}),a.jsx(V,{label:"Link de Instagram",help:"URL completa de tu perfil de Instagram",value:er.instagram,onChange:e=>{el({...er,instagram:e}),ez()},placeholder:"https://instagram.com/tu_usuario",type:"url"}),a.jsx(V,{label:"N\xfamero de WhatsApp",help:"Solo n\xfameros, con c\xf3digo de pa\xeds (ej: 5491112345678)",value:er.whatsapp,onChange:e=>{el({...er,whatsapp:e}),ez()},placeholder:"5491112345678",type:"tel"}),a.jsx(V,{label:"Email de contacto",help:"Email donde te contactan los clientes (tambi\xe9n se usa para recuperar contrase\xf1a)",value:er.email,onChange:e=>{el({...er,email:e}),ez()},placeholder:"hola@ejemplo.com",type:"email"}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6 mt-6",children:[a.jsx("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4",children:"\uD83D\uDCCD Ubicaci\xf3n y Entregas"}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(V,{label:"Ubicaci\xf3n del servicio (opcional)",help:"Direcci\xf3n donde atend\xe9s. Dejalo vac\xedo si no quer\xe9s mostrarlo.",value:er.location||"",onChange:e=>{el({...er,location:e}),ez()},placeholder:"Ej: Av. Corrientes 1234, CABA"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:"Opciones de entrega de productos"}),a.jsx("p",{className:"text-xs text-nude-400 mb-2",children:"Configur\xe1 c\xf3mo coordin\xe1s la entrega de productos"}),(0,a.jsxs)("select",{value:er.deliveryMode||"both",onChange:e=>{el({...er,deliveryMode:e.target.value}),ez()},className:"w-full px-4 py-3 rounded-xl border border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200 outline-none",children:[a.jsx("option",{value:"pickup",children:"Solo retiro en persona"}),a.jsx("option",{value:"shipping",children:"Solo env\xedos"}),a.jsx("option",{value:"both",children:"Retiro y env\xedos"})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6 mt-6",children:[(0,a.jsxs)("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4 flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5"}),"Seguridad"]}),E?(0,a.jsxs)("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200 space-y-4",children:[$?q?ee?(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-12 h-12 bg-sage-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(d.Z,{className:"w-6 h-6 text-sage-600"})}),a.jsx("p",{className:"text-sage-700 font-medium",children:"\xa1Contrase\xf1a actualizada!"}),a.jsx("button",{onClick:()=>{M(!1),I(!1),O(!1),L(""),F(""),B(""),es(!1)},className:"mt-3 text-sm text-nude-500 hover:text-nude-700",children:"Cerrar"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm text-sage-600 flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4"})," C\xf3digo verificado. Ingres\xe1 tu nueva contrase\xf1a."]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:et?"text":"password",value:_,onChange:e=>F(e.target.value),placeholder:"Nueva contrase\xf1a (m\xedn. 6 caracteres)",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400"}),a.jsx("button",{type:"button",onClick:()=>ea(!et),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:et?a.jsx(i,{className:"w-5 h-5"}):a.jsx(c,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:et?"text":"password",value:U,onChange:e=>B(e.target.value),placeholder:"Confirmar contrase\xf1a",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400"}),a.jsx("button",{type:"button",onClick:()=>ea(!et),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:et?a.jsx(i,{className:"w-5 h-5"}):a.jsx(c,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:async()=>{if(_!==U){X("Las contrase\xf1as no coinciden");return}if(_.length<6){X("M\xednimo 6 caracteres");return}K(!0),X("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"change_password",otp:R,newPassword:_})}),s=await e.json();s.success?(es(!0),k(_)):X(s.error||"Error al cambiar la contrase\xf1a")}catch{X("Error de conexi\xf3n")}K(!1)},disabled:Y||!_||!U,className:"w-full py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:Y?"Guardando...":"Guardar nueva contrase\xf1a"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm text-nude-600",children:["Ingres\xe1 el c\xf3digo de 6 d\xedgitos enviado a ",a.jsx("strong",{children:G})]}),a.jsx("input",{type:"text",value:R,onChange:e=>L(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full px-4 py-3 rounded-xl border border-cream-200 focus:border-rose-400 text-center text-2xl tracking-widest font-mono",maxLength:6}),a.jsx("button",{onClick:async()=>{K(!0),X("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify_otp",otp:R})}),s=await e.json();s.verified?O(!0):X(s.error||"C\xf3digo inv\xe1lido")}catch{X("Error de conexi\xf3n")}K(!1)},disabled:Y||6!==R.length,className:"w-full py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:Y?"Verificando...":"Verificar c\xf3digo"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[a.jsx("button",{onClick:async()=>{K(!0),X("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request_otp"})}),s=await e.json();s.success?(X(""),L(""),alert("C\xf3digo reenviado a "+s.email)):X(s.error||"Error al reenviar")}catch{X("Error de conexi\xf3n")}K(!1)},disabled:Y,className:"text-sm text-nude-500 hover:text-rose-600 transition-colors",children:"\xbfNo lleg\xf3? Reenviar c\xf3digo"}),a.jsx("button",{onClick:()=>{M(!1),I(!1),O(!1),L(""),F(""),B(""),X("")},className:"text-sm text-nude-500 hover:text-nude-700",children:"Cancelar"})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-nude-600",children:"Te enviaremos un c\xf3digo de verificaci\xf3n al email de contacto configurado."}),(0,a.jsxs)("button",{onClick:async()=>{K(!0),X("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request_otp"})}),s=await e.json();s.success?(I(!0),W(s.email)):X(s.error||"Error al enviar el c\xf3digo")}catch{X("Error de conexi\xf3n")}K(!1)},disabled:Y,className:"flex items-center gap-2 px-4 py-2 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:[a.jsx(p.Z,{className:"w-4 h-4"}),Y?"Enviando...":"Enviar c\xf3digo de verificaci\xf3n"]})]}),Q&&(0,a.jsxs)("p",{className:"text-rose-500 text-sm flex items-center gap-1",children:[a.jsx(m.Z,{className:"w-4 h-4"})," ",Q]})]}):a.jsx("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-nude-100 hover:bg-nude-200 text-nude-700 rounded-xl font-medium transition-colors",children:"Cambiar contrase\xf1a del panel"})]})]}),"products"===eg&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Tus Productos"}),a.jsx("p",{className:"text-nude-500 text-sm mt-1",children:"Accesorios, ropa, equipamiento y productos que vend\xe9s"})]}),(0,a.jsxs)("button",{onClick:()=>{eo([...en,{id:`producto-${Date.now()}`,name:"",description:"",price:0,category:"accesorios",image:"",featured:!1}]),ez()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-rose-500 text-white rounded-xl hover:bg-rose-600 transition-colors",children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Agregar Producto"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[en.map((e,s)=>a.jsx(J,{product:e,onUpdate:e=>eF(s,e),onRemove:()=>eV(s)},e.id)),0===en.length&&a.jsx("div",{className:"text-center py-12 text-nude-400",children:'No hay productos. Hac\xe9 clic en "Agregar Producto" para empezar.'})]})]}),"services"===eg&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Tus Planes"}),a.jsx("p",{className:"text-nude-500 text-sm mt-1",children:"Planes de clases de Pilates que ofrec\xe9s"})]}),(0,a.jsxs)("button",{onClick:()=>{ec([...ei,{id:`servicio-${Date.now()}`,name:"",description:"",price:0,duration:"60 min",durationMinutes:60,image:""}]),ez()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-sage-500 text-white rounded-xl hover:bg-sage-600 transition-colors",children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Agregar Servicio"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ei.map((e,s)=>a.jsx(H,{service:e,onUpdate:e=>eJ(s,e),onRemove:()=>eU(s)},e.id)),0===ei.length&&a.jsx("div",{className:"text-center py-12 text-nude-400",children:'No hay servicios. Hac\xe9 clic en "Agregar Servicio" para empezar.'})]})]}),"booking"===eg&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Configuraci\xf3n de Reservas"}),a.jsx("p",{className:"text-nude-500 text-sm mt-1",children:"Configur\xe1 los d\xedas y horarios disponibles para reservar turnos"})]}),a.jsx("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:ed.enabled,onChange:e=>{em({...ed,enabled:e.target.checked}),ez()},className:"w-5 h-5 rounded border-cream-300 text-rose-500 focus:ring-rose-400"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-rose-800",children:"Habilitar sistema de reservas online"}),a.jsx("p",{className:"text-sm text-nude-500",children:"Los clientes podr\xe1n reservar y pagar turnos desde la web"})]})]})}),ed.enabled&&a.jsx(z,{recurring:ed.recurring||[],exceptions:ed.exceptions||[],reservations:ex,onUpdateRecurring:e=>{em({...ed,recurring:e}),ez()},onUpdateExceptions:e=>{em({...ed,exceptions:e}),ez()}})]}),"pedidos"===eg&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Pedidos y Turnos"}),a.jsx("p",{className:"text-nude-500 text-sm mt-1",children:"Gesti\xf3n de entregas, turnos y compras"})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-amber-700 mb-3 flex items-center gap-2",children:["\uD83D\uDCE6 Productos a entregar (",eh.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[eh.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).sort((e,s)=>s.createdAt-e.createdAt).map(e=>(0,a.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-amber-800",children:e.customer.name}),a.jsx("p",{className:"text-xs text-amber-600",children:e.customer.phone})]}),a.jsx("p",{className:"text-xs text-amber-500",children:new Date(e.createdAt).toLocaleDateString("es-AR",{day:"numeric",month:"short"})})]}),a.jsx("div",{className:"space-y-1 mb-3",children:e.items.map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-amber-700",children:["• ",e.name," x",e.quantity]},s))}),a.jsx("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.id,deliveryStatus:"delivered"})}),ep(eh.map(s=>s.id===e.id?{...s,deliveryStatus:"delivered"}:s))},className:"w-full py-2 bg-amber-500 text-white rounded-lg text-sm font-medium hover:bg-amber-600 transition-colors",children:"✓ Marcar como entregado"})]},e.id)),0===eh.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).length&&a.jsx("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay productos pendientes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-sage-700 mb-3 flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5"}),"Turnos agendados (",ex.filter(e=>"confirmed"===e.status).length+eh.flatMap(e=>e.selectedSlots.filter(e=>"completed"!==e.status&&"absent"!==e.status)).length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[[...ex.filter(e=>"confirmed"===e.status).map(e=>({type:"reservation",date:e.date,time:e.time,serviceName:e.serviceName,customerName:e.customerName,customerPhone:e.customerPhone,data:e,orderId:"",slotIndex:-1})),...eh.flatMap(e=>e.selectedSlots.map((s,t)=>({...s,slotIdx:t,order:e})).filter(e=>"completed"!==e.status&&"absent"!==e.status).map(s=>({type:"order",date:s.date,time:s.time,serviceName:s.serviceName||e.serviceItems[0]?.name||"Servicio",customerName:e.customer.name,customerPhone:e.customer.phone,data:e,orderId:e.id,slotIndex:s.slotIdx})))].sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()).map((e,s)=>(0,a.jsxs)("div",{className:"p-4 bg-sage-50 rounded-xl border border-sage-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-sage-800",children:e.serviceName}),a.jsx("p",{className:"text-sm text-sage-600",children:e.customerName}),a.jsx("p",{className:"text-xs text-sage-500",children:e.customerPhone})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-sage-700",children:new Date(e.date+"T12:00:00").toLocaleDateString("es-AR",{day:"numeric",month:"short"})}),a.jsx("p",{className:"text-xs text-sage-500",children:e.time})]})]}),"reservation"===e.type?a.jsx("button",{onClick:()=>eN(e.data),className:"w-full py-2 bg-sage-200 text-sage-700 rounded-lg text-sm font-medium hover:bg-sage-300 transition-colors",children:"Ver detalles"}):(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderId,slotIndex:e.slotIndex,slotStatus:"completed"})}),ep(eh.map(s=>{if(s.id===e.orderId){let t=[...s.selectedSlots];return t[e.slotIndex]={...t[e.slotIndex],status:"completed"},{...s,selectedSlots:t}}return s}))},className:"flex-1 py-2 bg-sage-500 text-white rounded-lg text-sm font-medium hover:bg-sage-600 transition-colors",children:"✓ Cumplido"}),a.jsx("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderId,slotIndex:e.slotIndex,slotStatus:"absent"})}),ep(eh.map(s=>{if(s.id===e.orderId){let t=[...s.selectedSlots];return t[e.slotIndex]={...t[e.slotIndex],status:"absent"},{...s,selectedSlots:t}}return s}))},className:"flex-1 py-2 bg-red-100 text-red-600 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:"✗ Ausente"})]})]},`${e.type}-${s}`)),0===ex.filter(e=>"confirmed"===e.status).length&&0===eh.flatMap(e=>e.selectedSlots.filter(e=>"completed"!==e.status&&"absent"!==e.status)).length&&a.jsx("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay turnos pendientes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-rose-700 mb-3 flex items-center gap-2",children:["\uD83D\uDECD️ Historial de compras (",eh.length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[eh.map(e=>{let s=0===e.items.length||"delivered"===e.deliveryStatus,t=0===e.selectedSlots.length||e.selectedSlots.every(e=>"completed"===e.status||"absent"===e.status),r=e.selectedSlots.some(e=>"absent"===e.status);return a.jsx("button",{onClick:()=>ef(e),className:`w-full text-left p-4 rounded-xl border transition-colors ${s&&t&&!r?"bg-green-50 border-green-200 hover:border-green-300":r?"bg-red-50 border-red-200 hover:border-red-300":"bg-cream-50 border-cream-200 hover:border-rose-300"}`,children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-rose-800",children:e.customer.name}),(0,a.jsxs)("p",{className:"text-sm text-nude-500",children:[e.items.length>0&&`${e.items.length} prod.`,e.items.length>0&&e.selectedSlots.length>0&&" + ",e.selectedSlots.length>0&&`${e.selectedSlots.length} turno${e.selectedSlots.length>1?"s":""}`]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"font-medium text-rose-600",children:(0,D.T4)(e.total)}),a.jsx("p",{className:"text-xs text-nude-400",children:new Date(e.createdAt).toLocaleDateString("es-AR",{day:"numeric",month:"short"})})]})]})},e.id)}),0===eh.length&&a.jsx("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay compras registradas"})]})]})]}),ev&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>eN(null),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"font-display text-xl font-semibold text-rose-800",children:"Detalle del Turno"}),a.jsx("button",{onClick:()=>eN(null),className:"text-nude-400 hover:text-nude-600",children:a.jsx(j.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-sage-50 rounded-xl",children:[a.jsx("p",{className:"font-medium text-sage-800 text-lg",children:ev.serviceName}),a.jsx("p",{className:"text-sage-600",children:(0,D.T4)(ev.servicePrice)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase",children:"Fecha"}),a.jsx("p",{className:"font-medium text-nude-700",children:new Date(ev.date+"T12:00:00").toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"})})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase",children:"Horario"}),(0,a.jsxs)("p",{className:"font-medium text-nude-700",children:[ev.time," - ",ev.endTime]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Cliente"}),a.jsx("p",{className:"font-medium",children:ev.customerName}),a.jsx("p",{className:"text-sm text-nude-600",children:ev.customerEmail}),a.jsx("p",{className:"text-sm text-nude-600",children:ev.customerPhone})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx("a",{href:`https://wa.me/${ev.customerPhone?.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-500 text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors",children:"WhatsApp"}),a.jsx("a",{href:`mailto:${ev.customerEmail}`,className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-lg text-center text-sm font-medium hover:bg-rose-200 transition-colors",children:"Email"})]})]})]})}),ej&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ef(null),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"font-display text-xl font-semibold text-rose-800",children:"Detalle de Compra"}),a.jsx("button",{onClick:()=>ef(null),className:"text-nude-400 hover:text-nude-600",children:a.jsx(j.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ej.items.length>0&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Productos"}),a.jsx("div",{className:"space-y-2",children:ej.items.map((e,s)=>a.jsx("div",{className:"p-3 bg-cream-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{children:[e.name," x",e.quantity]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:(0,D.T4)(e.price*e.quantity)}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"delivered"===ej.deliveryStatus?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:"delivered"===ej.deliveryStatus?"✓ Entregado":"⏳ Pendiente"})]})]})},s))})]}),ej.serviceItems.length>0&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Servicios"}),a.jsx("div",{className:"space-y-2",children:ej.serviceItems.map((e,s)=>{let t=ej.selectedSlots[s];return(0,a.jsxs)("div",{className:"p-3 bg-sage-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("span",{children:[e.name," x",e.quantity]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:(0,D.T4)(e.price*e.quantity)}),t&&a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"completed"===t.status?"bg-green-100 text-green-700":"absent"===t.status?"bg-red-100 text-red-700":"bg-sage-200 text-sage-700"}`,children:"completed"===t.status?"✓ Cumplido":"absent"===t.status?"✗ Ausente":"⏳ Pendiente"})]})]}),t&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-sage-600",children:[a.jsx(b.Z,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(t.date+"T12:00:00").toLocaleDateString("es-AR",{weekday:"short",day:"numeric",month:"short"})}),a.jsx(f.Z,{className:"w-4 h-4 ml-1"}),a.jsx("span",{children:t.time})]})]},s)})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-rose-100 rounded-xl",children:[a.jsx("span",{className:"font-medium",children:"Total"}),a.jsx("span",{className:"text-xl font-bold text-rose-700",children:(0,D.T4)(ej.total)})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Cliente"}),a.jsx("p",{className:"font-medium",children:ej.customer.name}),a.jsx("p",{className:"text-sm text-nude-600",children:ej.customer.email}),a.jsx("p",{className:"text-sm text-nude-600",children:ej.customer.phone})]}),a.jsx("p",{className:"text-xs text-nude-400 text-center",children:new Date(ej.createdAt).toLocaleString("es-AR")}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx("a",{href:`https://wa.me/${ej.customer.phone?.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-500 text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors",children:"WhatsApp"}),a.jsx("a",{href:`mailto:${ej.customer.email}`,className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-lg text-center text-sm font-medium hover:bg-rose-200 transition-colors",children:"Email"})]})]})]})})]}),"mercadopago"===eg&&(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"MercadoPago"}),a.jsx("p",{className:"text-nude-500 text-sm mt-1",children:"Configuraci\xf3n de pagos y comisiones"})]}),!e$.developmentPaid&&a.jsx("div",{className:"p-6 bg-amber-50 rounded-xl border border-amber-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(m.Z,{className:"w-6 h-6 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h3",{className:"font-medium text-amber-800 mb-1",children:["Comisi\xf3n activa: ",e$.percentage,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-amber-700 mb-4",children:["Se cobra una comisi\xf3n del ",e$.percentage,"% en cada venta. Pagando el desarrollo, elimin\xe1s esta comisi\xf3n para siempre."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg mb-4",children:[a.jsx("span",{className:"font-medium text-amber-800",children:"Pago \xfanico"}),a.jsx("span",{className:"text-2xl font-bold text-amber-700",children:"$300.000"})]}),(0,a.jsxs)("button",{onClick:async()=>{eO(!0);try{let e=await fetch("/api/checkout/development",{method:"POST"}),s=await e.json();s.init_point&&(window.location.href=s.init_point)}catch{alert("Error al crear el pago")}eO(!1)},disabled:eq,className:"w-full py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(v.Z,{className:"w-5 h-5"}),eq?"Procesando...":"Pagar y eliminar comisi\xf3n"]})]})]})}),e$.developmentPaid&&a.jsx("div",{className:"p-6 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-sage-100 rounded-full flex items-center justify-center",children:a.jsx(d.Z,{className:"w-6 h-6 text-sage-600"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium text-sage-800",children:"\xa1Desarrollo pagado!"}),a.jsx("p",{className:"text-sm text-sage-600",children:"No se cobra ninguna comisi\xf3n en tus ventas"})]})]})}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6",children:[a.jsx("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4",children:"Conexi\xf3n de cuenta"}),eZ.connected?a.jsx("div",{className:"p-4 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(d.Z,{className:"w-5 h-5 text-sage-600"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-sage-800",children:"Cuenta conectada"}),(0,a.jsxs)("p",{className:"text-sm text-sage-600",children:["ID: ",eZ.userId]})]})]}),(0,a.jsxs)("button",{onClick:async()=>{confirm("\xbfSeguro que quer\xe9s desconectar tu cuenta?")&&(eM(!0),await fetch("/api/oauth/status",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"disconnect"})}),eA({connected:!1}),eM(!1))},disabled:eE,className:"text-rose-500 hover:text-rose-700 text-sm flex items-center gap-1",children:[a.jsx(N,{className:"w-4 h-4"}),"Desconectar"]})]})}):a.jsx("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium text-rose-800",children:"No hay cuenta conectada"}),a.jsx("p",{className:"text-sm text-nude-500",children:"Conect\xe1 tu MercadoPago para recibir pagos"})]}),(0,a.jsxs)("a",{href:"/api/oauth/connect",className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:[a.jsx(y,{className:"w-4 h-4"}),"Conectar"]})]})})]}),(0,a.jsxs)("div",{className:"p-4 bg-nude-50 rounded-xl border border-nude-200",children:[a.jsx("h4",{className:"font-medium text-nude-700 mb-2",children:"\uD83D\uDCA1 \xbfC\xf3mo funciona?"}),(0,a.jsxs)("ul",{className:"text-sm text-nude-600 space-y-1",children:[a.jsx("li",{children:"• Conect\xe1s tu cuenta de MercadoPago"}),a.jsx("li",{children:"• Los clientes pagan y el dinero va a tu cuenta"}),!e$.developmentPaid&&(0,a.jsxs)("li",{children:["• Se cobra ",e$.percentage,"% de comisi\xf3n hasta pagar el desarrollo"]}),e$.developmentPaid&&a.jsx("li",{children:"• ✅ Sin comisiones - desarrollo pagado"})]})]})]})]})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 to-cream-100 p-4",children:a.jsx("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(o,{className:"w-8 h-8 text-rose-500"})}),a.jsx("h1",{className:"font-display text-2xl font-semibold text-rose-800",children:"Panel de Admin"}),a.jsx("p",{className:"text-nude-500 mt-2",children:"Ingres\xe1 tu contrase\xf1a para continuar"})]}),(0,a.jsxs)("form",{onSubmit:eR,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:P?"text":"password",value:t,onChange:e=>n(e.target.value),placeholder:"Contrase\xf1a",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200 outline-none"}),a.jsx("button",{type:"button",onClick:()=>T(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:P?a.jsx(i,{className:"w-5 h-5"}):a.jsx(c,{className:"w-5 h-5"})})]}),S&&a.jsx("p",{className:"text-rose-500 text-sm text-center",children:S}),a.jsx("button",{type:"submit",className:"w-full py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 transition-colors",children:"Ingresar"})]})]})})})}function V({label:e,help:s,value:t,onChange:r,placeholder:l,type:n="text"}){let o=function(e,s){if(!e||""===e.trim())return{valid:!0};switch(s){case"url":try{return new URL(e),{valid:!0}}catch{return{valid:!1,error:"Ingres\xe1 una URL v\xe1lida (ej: https://instagram.com/usuario)"}}case"tel":let t=e.replace(/[\s\-\(\)\.]/g,"");if(!/^\+?\d+$/.test(t))return{valid:!1,error:"Solo n\xfameros (sin espacios ni guiones)"};if(t.length<8)return{valid:!1,error:"El n\xfamero es muy corto (m\xednimo 8 d\xedgitos)"};if(t.length>15)return{valid:!1,error:"El n\xfamero es muy largo (m\xe1ximo 15 d\xedgitos)"};return{valid:!0};case"email":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{valid:!1,error:"Ingres\xe1 un email v\xe1lido (ej: contacto@ejemplo.com)"};return{valid:!0};default:return{valid:!0}}}(t,n),i=!o.valid&&t.length>0;return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:e}),s&&a.jsx("p",{className:"text-xs text-nude-400 mb-2",children:s}),a.jsx("input",{type:"tel"===n?"text":n,value:t,onChange:e=>r(e.target.value),placeholder:l,className:`w-full px-4 py-3 rounded-xl border outline-none transition-all ${i?"border-red-400 focus:border-red-500 focus:ring-2 focus:ring-red-200 bg-red-50":"border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200"}`}),i&&(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[a.jsx("span",{className:"inline-block w-1 h-1 bg-red-500 rounded-full"}),o.error]}),o.valid&&t.length>0&&("url"===n||"tel"===n||"email"===n)&&(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[a.jsx("span",{className:"inline-block w-1 h-1 bg-green-500 rounded-full"}),"✓ V\xe1lido"]})]})}function J({product:e,onUpdate:s,onRemove:t}){let[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(null),c=async e=>{let t=e.target.files?.[0];if(!t)return;o(!0);let a=new FormData;a.append("file",t);try{let e=await fetch("/api/upload",{method:"POST",body:a}),t=await e.json();t.url?s({image:t.url}):alert(t.error||"Error al subir imagen")}catch{alert("Error al subir imagen")}finally{o(!1)}};return(0,a.jsxs)("div",{className:`p-4 sm:p-5 rounded-xl border ${e.paused?"bg-amber-50 border-amber-200":"bg-cream-50 border-cream-200"}`,children:[e.paused&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-700 text-sm mb-3 font-medium",children:[a.jsx(w,{className:"w-4 h-4"}),"Producto pausado - no visible en la tienda"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:[a.jsx("div",{className:`w-24 h-24 rounded-xl bg-white border-2 border-dashed flex items-center justify-center overflow-hidden cursor-pointer transition-colors ${e.paused?"border-amber-300 hover:border-amber-400 opacity-60":"border-cream-300 hover:border-rose-400"}`,onClick:()=>i.current?.click(),children:n?a.jsx(l.Z,{className:"w-6 h-6 text-rose-400 animate-spin"}):e.image?a.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"text-center p-2",children:[a.jsx(k,{className:"w-6 h-6 text-cream-400 mx-auto"}),a.jsx("span",{className:"text-xs text-cream-400 mt-1 block",children:"Subir foto"})]})}),a.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:c,className:"hidden"})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",value:e.name,onChange:e=>s({name:e.target.value}),placeholder:"Nombre del producto",className:"flex-1 px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none text-rose-800 font-medium"}),a.jsx("button",{onClick:t,className:"p-2 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar producto",children:a.jsx(S,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-nude-500 mb-1",children:"Precio (ARS)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-nude-400",children:"$"}),a.jsx("input",{type:"number",value:e.price||"",onChange:e=>s({price:parseInt(e.target.value)||0}),placeholder:"0",className:"w-full pl-7 pr-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none"})]}),e.price>0&&(0,a.jsxs)("span",{className:"text-xs text-sage-600 mt-1 block",children:["Se muestra: ",(0,D.T4)(e.price)]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-nude-500 mb-1",children:"Categor\xeda"}),(0,a.jsxs)("select",{value:e.category,onChange:e=>s({category:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none",children:[a.jsx("option",{value:"accesorios",children:"\uD83C\uDFAF Accesorios"}),a.jsx("option",{value:"ropa",children:"\uD83D\uDC55 Ropa"}),a.jsx("option",{value:"equipamiento",children:"\uD83C\uDFCB️ Equipamiento"}),a.jsx("option",{value:"suplementos",children:"\uD83D\uDC8A Suplementos"})]})]}),a.jsx("div",{className:"flex items-end",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.featured,onChange:e=>s({featured:e.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-rose-500 focus:ring-rose-400"}),a.jsx("span",{className:"text-sm text-rose-700",children:"⭐ Destacado"})]})}),a.jsx("div",{className:"flex items-end",children:(0,a.jsxs)("button",{type:"button",onClick:()=>s({paused:!e.paused}),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e.paused?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-sage-100 text-sage-700 hover:bg-sage-200"}`,children:[e.paused?a.jsx(C,{className:"w-4 h-4"}):a.jsx(w,{className:"w-4 h-4"}),e.paused?"Activar":"Pausar"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-nude-500 mb-1",children:[a.jsx("input",{type:"checkbox",checked:e.trackStock,onChange:t=>s({trackStock:t.target.checked,stock:t.target.checked?e.stock||0:void 0}),className:"w-3 h-3 rounded border-cream-300 text-rose-500"}),"Controlar stock"]}),e.trackStock&&a.jsx("input",{type:"number",value:e.stock??"",onChange:e=>s({stock:parseInt(e.target.value)||0}),placeholder:"0",min:"0",className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-nude-500 mb-1",children:"Descripci\xf3n"}),a.jsx("textarea",{value:e.description,onChange:e=>s({description:e.target.value}),placeholder:"Describ\xed brevemente...",rows:2,className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none resize-none"})]})]})]})]})]})}function U(e){if(e<60)return`${e} min`;let s=Math.floor(e/60),t=e%60;return 0===t?1===s?"1 hora":`${s} horas`:`${s}h ${t}min`}function H({service:e,onUpdate:s,onRemove:t}){let[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(null),c=async e=>{let t=e.target.files?.[0];if(!t)return;o(!0);let a=new FormData;a.append("file",t);try{let e=await fetch("/api/upload",{method:"POST",body:a}),t=await e.json();t.url?s({image:t.url}):alert(t.error||"Error al subir imagen")}catch{alert("Error al subir imagen")}finally{o(!1)}};return a.jsx("div",{className:"p-4 sm:p-5 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:[a.jsx("div",{className:"w-24 h-24 rounded-xl bg-white border-2 border-dashed border-sage-300 flex items-center justify-center overflow-hidden cursor-pointer hover:border-sage-400 transition-colors",onClick:()=>i.current?.click(),children:n?a.jsx(l.Z,{className:"w-6 h-6 text-sage-400 animate-spin"}):e.image?a.jsx("img",{src:e.image,alt:"",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"text-center p-2",children:[a.jsx(k,{className:"w-6 h-6 text-sage-300 mx-auto"}),a.jsx("span",{className:"text-xs text-sage-400 mt-1 block",children:"Subir foto"})]})}),a.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:c,className:"hidden"})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",value:e.name,onChange:e=>s({name:e.target.value}),placeholder:"Nombre del servicio",className:"flex-1 px-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none text-sage-800 font-medium"}),a.jsx("button",{onClick:t,className:"p-2 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar servicio",children:a.jsx(S,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-nude-500 mb-1",children:"Precio (ARS)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-nude-400",children:"$"}),a.jsx("input",{type:"number",value:e.price||"",onChange:e=>s({price:parseInt(e.target.value)||0}),placeholder:"0",className:"w-full pl-7 pr-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none"})]}),e.price>0&&(0,a.jsxs)("span",{className:"text-xs text-sage-600 mt-1 block",children:["Se muestra: ",(0,D.T4)(e.price)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-nude-500 mb-1",children:["Duraci\xf3n: ",U(e.durationMinutes||60)]}),a.jsx("input",{type:"range",min:5,max:240,step:5,value:e.durationMinutes||60,onChange:e=>{let t=parseInt(e.target.value);s({durationMinutes:t,duration:U(t)})},className:"w-full h-2 bg-sage-200 rounded-lg appearance-none cursor-pointer accent-sage-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-nude-400 mt-1",children:[a.jsx("span",{children:"5 min"}),a.jsx("span",{children:"4 horas"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-nude-500 mb-1",children:"Descripci\xf3n"}),a.jsx("textarea",{value:e.description,onChange:e=>s({description:e.target.value}),placeholder:"Describ\xed brevemente el servicio...",rows:2,className:"w-full px-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none resize-none"})]})]})]})})}},4753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\agusk\Desktop\Stuff\Projects\PilatesReformer\src\app\admin\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,779,454,66],()=>t(3228));module.exports=a})();