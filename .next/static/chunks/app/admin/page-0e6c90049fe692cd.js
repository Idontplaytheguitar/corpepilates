(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3997:function(e,s,t){Promise.resolve().then(t.bind(t,681))},681:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return J}});var a=t(7437),r=t(2265),n=t(1817),l=t(6337),o=t(7769),i=t(2208),c=t(401),d=t(9322),m=t(3229),x=t(7692),u=t(4001),h=t(9345),p=t(9397),g=t(1047),b=t(2489),f=t(1723),j=t(8226),v=t(1879),N=t(9985),y=t(9227),w=t(3113),S=t(8930),C=t(3276),k=t(6397),D=t(2451),P=t(407),T=t(8867);let A=["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"],E=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function Z(e){let{value:s,onChange:t,minDate:n}=e,[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(()=>s?new Date(s+"T12:00:00"):new Date),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&o(!1)};return l&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);let m=e=>{if(!n)return!1;let s=new Date(n);return s.setHours(0,0,0,0),e<s},x=e=>{m(e)||(t(e.toISOString().split("T")[0]),o(!1))};return(0,a.jsxs)("div",{ref:d,className:"relative flex-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>o(!l),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all duration-200 text-left\n                   ".concat(l?"border-rose-500 ring-4 ring-rose-100":"border-cream-200 hover:border-rose-300","\n                   bg-white hover:bg-rose-50/50"),children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all duration-200 shadow-sm\n                        ".concat(l?"bg-rose-500":"bg-rose-100 hover:bg-rose-200"),children:(0,a.jsx)(g.Z,{className:"w-5 h-5 ".concat(l?"text-white":"text-rose-500")})}),(0,a.jsx)("span",{className:"font-medium ".concat(s?"text-rose-800":"text-nude-400"),children:s?s?new Date(s+"T12:00:00").toLocaleDateString("es-AR",{weekday:"short",day:"numeric",month:"short"}):"":"Seleccionar fecha"})]}),l&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-cream-200 p-4 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>c(new Date(i.getFullYear(),i.getMonth()-1)),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:(0,a.jsx)(D.Z,{className:"w-5 h-5 text-rose-600"})}),(0,a.jsxs)("span",{className:"font-semibold text-rose-800",children:[E[i.getMonth()]," ",i.getFullYear()]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(new Date(i.getFullYear(),i.getMonth()+1)),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:(0,a.jsx)(P.Z,{className:"w-5 h-5 text-rose-600"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs mb-2",children:A.map(e=>(0,a.jsx)("div",{className:"py-1 text-nude-500 font-medium",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let e=i.getFullYear(),s=i.getMonth(),t=new Date(e,s,1),a=new Date(e,s+1,0),r=[],n=(t.getDay()+6)%7;for(let e=0;e<n;e++)r.push(null);for(let t=1;t<=a.getDate();t++)r.push(new Date(e,s,t));return r})().map((e,t)=>{if(!e)return(0,a.jsx)("div",{},t);let r=s===e.toISOString().split("T")[0],n=m(e),l=new Date().toDateString()===e.toDateString();return(0,a.jsx)("button",{type:"button",onClick:()=>x(e),disabled:n,className:"py-2 rounded-lg text-sm font-medium transition-all ".concat(r?"bg-rose-500 text-white shadow-md":n?"text-nude-300 cursor-not-allowed":l?"bg-sage-100 text-sage-700 hover:bg-sage-200":"hover:bg-rose-100 text-rose-800"),children:e.getDate()},t)})})]})]})}let I=Array.from({length:24},(e,s)=>s);function O(e){return"".concat(Math.floor(e/2).toString().padStart(2,"0"),":").concat((e%2*30).toString().padStart(2,"0"))}function M(e){let[s,t]=e.split(":").map(Number);return 2*s+Math.floor(t/30)}function R(e){let s=Array(48).fill(!1);return e.forEach(e=>{let t=M(e.start),a=M(e.end);for(let e=t;e<a&&e<48;e++)s[e]=!0}),s}function q(e){let s=[],t=null;for(let a=0;a<=48;a++)e[a]&&null===t?t=a:e[a]||null===t||(s.push({start:O(t),end:O(a)}),t=null);return s}function L(e){let{slots:s,onChange:t}=e,[n,l]=(0,r.useState)(()=>R(s));(0,r.useEffect)(()=>{l(R(s))},[s]);let o=e=>{let s=[...n];s[e]=!s[e],l(s),t(q(s))},i=e=>{let s=2*e,a=s+1,r=n[s]&&n[a],o=[...n];o[s]=!r,o[a]=!r,l(o),t(q(o))},c=(e,s)=>{let a=[...n];for(let t=e;t<s;t++)a[2*t]=!0,a[2*t+1]=!0;l(a),t(q(a))},d=I.filter(e=>e>=7&&e<22);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>c(8,12),className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-cream-100 text-nude-600 hover:bg-cream-200 transition-colors",children:"Ma\xf1ana (08-12)"}),(0,a.jsx)("button",{onClick:()=>c(14,18),className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-cream-100 text-nude-600 hover:bg-cream-200 transition-colors",children:"Tarde (14-18)"}),(0,a.jsx)("button",{onClick:()=>{let e=[...n];for(let s=7;s<22;s++)e[2*s]=!0,e[2*s+1]=!0;l(e),t(q(e))},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-sage-100 text-sage-700 hover:bg-sage-200 transition-colors",children:"Todo el d\xeda"}),(0,a.jsxs)("button",{onClick:()=>{l(Array(48).fill(!1)),t([])},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-rose-100 text-rose-600 hover:bg-rose-200 transition-colors flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"}),"Limpiar"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-[400px] overflow-y-auto pr-1 scrollbar-thin",children:d.map(e=>{let s=2*e,t=s+1,r=n[s],l=n[t],c=r&&l,d="".concat(e.toString().padStart(2,"0"),":00");return(0,a.jsxs)("div",{className:"bg-cream-50 rounded-lg border border-cream-200 p-3 hover:border-rose-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("button",{onClick:()=>i(e),className:"text-sm font-semibold transition-colors ".concat(c?"text-sage-700":r||l?"text-rose-700":"text-nude-500"),children:d}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(c?"bg-sage-500":r||l?"bg-rose-400":"bg-cream-300")})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>o(s),className:"flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ".concat(r?"bg-sage-400 text-white shadow-sm hover:bg-sage-500":"bg-cream-100 text-nude-500 hover:bg-cream-200"),children:[e.toString().padStart(2,"0"),":00"]}),(0,a.jsxs)("button",{onClick:()=>o(t),className:"flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ".concat(l?"bg-sage-400 text-white shadow-sm hover:bg-sage-500":"bg-cream-100 text-nude-500 hover:bg-cream-200"),children:[e.toString().padStart(2,"0"),":30"]})]})]},e)})}),(0,a.jsxs)("div",{className:"text-xs text-nude-400 flex items-center gap-4 pt-2 border-t border-cream-200",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-sage-400 rounded"})," Activo"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-cream-200 rounded"})," Inactivo"]})]})]})}function F(e){let{blockedSlots:s,recurringSlots:t,reservedSlots:n=[],onChange:l}=e,o=R(t),i=R(n),[c,d]=(0,r.useState)(()=>R(s));(0,r.useEffect)(()=>{d(R(s))},[s]);let m=e=>{if(!o[e]||i[e])return;let s=[...c];s[e]=!s[e],d(s),l(q(s))},x=I.filter(e=>{let s=2*e;return o[s]||o[s+1]});return 0===x.length?(0,a.jsx)("div",{className:"text-sm text-nude-400 text-center py-4",children:"No hay horarios laborables configurados para este d\xeda"}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-xs text-nude-500 font-medium",children:"Toc\xe1 los horarios que quer\xe9s bloquear (se pondr\xe1n rojos)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 max-h-[300px] overflow-y-auto pr-1 scrollbar-thin",children:x.map(e=>{let s=2*e,t=s+1,r=o[s],n=o[t],l=i[s],d=i[t],x=c[s],u=c[t];return(0,a.jsxs)("div",{className:"bg-cream-50 rounded-lg border border-cream-200 p-2",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold text-nude-600 mb-1.5",children:[e.toString().padStart(2,"0"),":00"]}),(0,a.jsxs)("div",{className:"flex gap-1.5",children:[r&&(0,a.jsx)("button",{onClick:()=>m(s),disabled:l,className:"flex-1 py-1.5 px-1 rounded text-[11px] font-medium transition-all ".concat(l?"bg-amber-400 text-white cursor-not-allowed":x?"bg-rose-400 text-white hover:bg-rose-500":"bg-sage-400 text-white hover:bg-sage-500"),children:":00"}),n&&(0,a.jsx)("button",{onClick:()=>m(t),disabled:d,className:"flex-1 py-1.5 px-1 rounded text-[11px] font-medium transition-all ".concat(d?"bg-amber-400 text-white cursor-not-allowed":u?"bg-rose-400 text-white hover:bg-rose-500":"bg-sage-400 text-white hover:bg-sage-500"),children:":30"})]})]},e)})}),(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2 pt-2 border-t border-cream-200",children:[(0,a.jsxs)("div",{className:"flex gap-3 text-xs flex-wrap",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-sage-400 rounded"})," Trabajando"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-rose-400 rounded"})," Bloqueado"]}),n.length>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-amber-400 rounded"})," Reservado"]})]}),s.length>0&&(0,a.jsxs)("button",{onClick:()=>{d(Array(48).fill(!1)),l([])},className:"text-xs text-rose-500 hover:text-rose-700 flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"}),"Quitar bloqueos"]})]})]})}function _(e){var s;let{recurring:t,exceptions:n,reservations:l=[],onUpdateRecurring:o,onUpdateExceptions:i}=e,[c,d]=(0,r.useState)("recurring"),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)(1),j=e=>{let s=t.find(s=>s.dayOfWeek===e);return(null==s?void 0:s.slots)||[]},v=e=>l.filter(s=>s.date===e&&("confirmed"===s.status||"pending"===s.status)).map(e=>({start:e.time,end:e.endTime})),N=(e,s)=>{let a=t.filter(s=>s.dayOfWeek!==e);s.length>0?o([...a,{dayOfWeek:e,slots:s}]):o(a)},y=(e,s)=>{i(n.map(t=>t.date===e?{...t,...s}:t))},w=e=>{i(n.filter(s=>s.date!==e))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>d("recurring"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("recurring"===c?"bg-rose-500 text-white":"bg-cream-100 text-nude-600 hover:bg-cream-200"),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-2"}),"Horarios semanales"]}),(0,a.jsxs)("button",{onClick:()=>d("exceptions"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("exceptions"===c?"bg-rose-500 text-white":"bg-cream-100 text-nude-600 hover:bg-cream-200"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-2"}),"D\xedas especiales (",n.length,")"]})]}),"recurring"===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-nude-500",children:"Seleccion\xe1 un d\xeda y arrastr\xe1 sobre la grilla para marcar los horarios de atenci\xf3n."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:k.sb.map(e=>{let s=j(e.id).length>0;return(0,a.jsxs)("button",{onClick:()=>h(e.id),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(u===e.id?"bg-rose-500 text-white":s?"bg-sage-100 text-sage-700 hover:bg-sage-200":"bg-cream-100 text-nude-500 hover:bg-cream-200"),children:[e.short,s&&u!==e.id&&(0,a.jsx)("span",{className:"ml-1 w-2 h-2 bg-sage-500 rounded-full inline-block"})]},e.id)})}),(0,a.jsxs)("div",{className:"bg-cream-50 rounded-xl p-4 border border-cream-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-rose-800",children:null===(s=k.sb.find(e=>e.id===u))||void 0===s?void 0:s.name}),(0,a.jsxs)("button",{onClick:()=>{let e=j(u),s=t.filter(e=>0===e.dayOfWeek||6===e.dayOfWeek);for(let t=1;t<=5;t++)e.length>0&&s.push({dayOfWeek:t,slots:[...e]});o(s)},className:"text-xs px-3 py-1.5 bg-sage-100 text-sage-700 rounded-lg hover:bg-sage-200 flex items-center gap-1",children:[(0,a.jsx)(T.Z,{className:"w-3 h-3"}),"Copiar a Lun-Vie"]})]}),(0,a.jsx)(L,{slots:j(u),onChange:e=>N(u,e)})]}),(0,a.jsxs)("div",{className:"text-sm text-nude-500 bg-cream-50 rounded-lg p-3 border border-cream-200",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Hac\xe9 click y arrastr\xe1 para seleccionar rangos. Volv\xe9 a hacer click en \xe1reas seleccionadas para deseleccionar."]})]}),"exceptions"===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-nude-500",children:"Agreg\xe1 d\xedas especiales donde el horario sea diferente al habitual (feriados, vacaciones, horarios especiales)."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(Z,{value:m,onChange:x,minDate:new Date}),(0,a.jsxs)("button",{type:"button",onClick:()=>{m&&(n.find(e=>e.date===m)||(i([...n,{date:m,slots:[],isBlocked:!1}]),x("")))},disabled:!m,className:"px-6 py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 hover:shadow-lg hover:shadow-rose-200 disabled:opacity-50 disabled:hover:shadow-none disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all duration-200",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5"}),"Agregar"]})]}),(0,a.jsxs)("div",{className:"text-sm bg-amber-50 text-amber-800 rounded-lg p-3 border border-amber-200",children:["⚠️ ",(0,a.jsx)("strong",{children:"Importante:"})," En los d\xedas laborables, seleccion\xe1 las horas que ",(0,a.jsx)("strong",{children:"NO"})," vas a trabajar para bloquearlas. El horario recurrente se muestra en verde, y lo que selecciones se bloquear\xe1 (rojo)."]}),0===n.length?(0,a.jsx)("div",{className:"text-center py-8 text-nude-400 bg-cream-50 rounded-xl",children:"No hay d\xedas especiales configurados"}):(0,a.jsx)("div",{className:"space-y-3",children:n.sort((e,s)=>e.date.localeCompare(s.date)).map(e=>{var s,t;let r=new Date(e.date+"T12:00:00"),n=r.getDay(),l=j(n);return(0,a.jsxs)("div",{className:"rounded-xl border overflow-hidden ".concat(e.isBlocked?"border-rose-200 bg-rose-50":"border-cream-200 bg-white"),children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 gap-2 border-b border-cream-200",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-rose-800 capitalize",children:r.toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"})}),0===l.length&&!e.isBlocked&&(0,a.jsx)("span",{className:"text-xs text-amber-600 bg-amber-100 px-2 py-0.5 rounded w-fit",children:"Sin horario recurrente"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.isBlocked,onChange:s=>y(e.date,{isBlocked:s.target.checked,slots:[]}),className:"rounded border-cream-300 text-rose-500"}),(0,a.jsx)("span",{className:"text-rose-600",children:"No laborable"})]}),(0,a.jsx)("button",{onClick:()=>w(e.date),className:"p-1.5 text-rose-400 hover:text-rose-600 hover:bg-rose-100 rounded-lg",title:"Eliminar excepci\xf3n",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})]}),!e.isBlocked&&l.length>0&&(0,a.jsx)("div",{className:"p-3",children:(0,a.jsx)(F,{blockedSlots:e.slots,recurringSlots:l,reservedSlots:v(e.date),onChange:s=>y(e.date,{slots:s})})}),!e.isBlocked&&0===l.length&&(0,a.jsxs)("div",{className:"p-3 text-sm text-nude-500",children:["Este d\xeda no tiene horario recurrente configurado. Configur\xe1 primero el horario semanal para ",null===(t=k.sb.find(e=>e.id===n))||void 0===t?void 0:null===(s=t.name)||void 0===s?void 0:s.toLowerCase(),"."]})]},e.date)})})]})]})}function J(){var e,s;let[t,y]=(0,r.useState)(!1),[w,S]=(0,r.useState)(""),[C,D]=(0,r.useState)(""),[P,T]=(0,r.useState)(""),[A,E]=(0,r.useState)(!1),[Z,I]=(0,r.useState)(!0),[O,M]=(0,r.useState)(!1),[R,q]=(0,r.useState)(!1),[L,F]=(0,r.useState)(!1),[J,U]=(0,r.useState)(""),[W,G]=(0,r.useState)(""),[H,$]=(0,r.useState)(""),[Y,Q]=(0,r.useState)(""),[K,X]=(0,r.useState)(!1),[ee,es]=(0,r.useState)(""),[et,ea]=(0,r.useState)(!1),[er,en]=(0,r.useState)(!1),[el,eo]=(0,r.useState)(k.u_.site),[ei,ec]=(0,r.useState)(k.u_.products),[ed,em]=(0,r.useState)(k.u_.services),[ex,eu]=(0,r.useState)(k.u_.booking),[eh,ep]=(0,r.useState)([]),[eg,eb]=(0,r.useState)([]),[ef,ej]=(0,r.useState)("site"),[ev,eN]=(0,r.useState)(null),[ey,ew]=(0,r.useState)(null),[eS,eC]=(0,r.useState)(!1),[ek,eD]=(0,r.useState)(!1),[eP,eT]=(0,r.useState)("idle"),[eA,eE]=(0,r.useState)(!1),[eZ,eI]=(0,r.useState)({connected:!1}),[eO,eM]=(0,r.useState)(!1),[eR,eq]=(0,r.useState)({enabled:!0,percentage:5,developmentPaid:!1}),[eL,eF]=(0,r.useState)(!1);(0,r.useEffect)(()=>{fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"check"})}).then(e=>e.json()).then(e=>{e.authenticated&&y(!0),I(!1)}).catch(()=>{I(!1)}),fetch("/api/admin/config").then(e=>e.json()).then(e=>{e.site&&eo(e.site),e.products&&ec(e.products),e.services&&em(e.services),e.booking&&eu(e.booking),eC(!0)}).catch(()=>{eC(!0)}),fetch("/api/oauth/status").then(e=>e.json()).then(e=>eI(e)).catch(()=>{}),fetch("/api/fee").then(e=>e.json()).then(e=>eq(e)).catch(()=>{}),fetch("/api/admin/reservations").then(e=>e.json()).then(e=>ep(e.reservations||[])).catch(()=>{}),fetch("/api/admin/orders").then(e=>e.json()).then(e=>eb(e.orders||[])).catch(()=>{}),"success"===new URLSearchParams(window.location.search).get("dev_payment")&&fetch("/api/fee",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({developmentPaid:!0})}).then(()=>{eq(e=>({...e,developmentPaid:!0,enabled:!1})),window.history.replaceState({},"","/admin"),alert("\xa1Gracias por tu pago! La comisi\xf3n ha sido desactivada.")})},[]);let e_=async e=>{e.preventDefault(),(await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"login",password:w})})).ok?(y(!0),D(w),T("")):T("Contrase\xf1a incorrecta")},eJ=async()=>{await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"logout"})}),y(!1),D(""),S("")},eB=async()=>{eD(!0),eT("idle");try{let e=await fetch("/api/admin/config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({config:{site:el,products:ei,services:ed,booking:ex}})});if(e.ok)eT("success"),eE(!1),setTimeout(()=>eT("idle"),3e3);else{let s=await e.json();console.error("Save error:",s.error),eT("error")}}catch(e){console.error("Save error:",e),eT("error")}finally{eD(!1)}},ez=()=>eE(!0),eU=(e,s)=>{let t=[...ei];t[e]={...t[e],...s},ec(t),ez()},eV=e=>{ec(ei.filter((s,t)=>t!==e)),ez()},eW=(e,s)=>{let t=[...ed];t[e]={...t[e],...s},em(t),ez()},eG=e=>{em(ed.filter((s,t)=>t!==e)),ez()};return Z?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 to-cream-100 p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.Z,{className:"w-10 h-10 text-rose-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-nude-500",children:"Verificando sesi\xf3n..."})]})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-cream-100 pt-24 pb-12 px-4",children:(0,a.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-rose-600 text-white p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-display text-2xl sm:text-3xl font-semibold",children:"Panel de Administraci\xf3n"}),(0,a.jsx)("p",{className:"text-rose-200 mt-1",children:"Configur\xe1 tu tienda"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,a.jsxs)("button",{onClick:eB,disabled:ek||!eA||!eS,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 sm:px-6 py-3 rounded-xl font-semibold transition-all ".concat("success"===eP?"bg-green-500 text-white":"error"===eP?"bg-red-500 text-white":eA?"bg-white text-rose-600 hover:bg-rose-50":"bg-rose-400 text-rose-200 cursor-not-allowed"),children:[ek?(0,a.jsx)(n.Z,{className:"w-5 h-5 animate-spin"}):"success"===eP?(0,a.jsx)(c.Z,{className:"w-5 h-5"}):"error"===eP?(0,a.jsx)(d.Z,{className:"w-5 h-5"}):(0,a.jsx)(m.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:ek?"Guardando...":"success"===eP?"\xa1Guardado!":"error"===eP?"Error":"Guardar Cambios"}),(0,a.jsx)("span",{className:"sm:hidden",children:ek?"...":"success"===eP?"✓":"error"===eP?"!":"Guardar"})]}),(0,a.jsx)("button",{onClick:eJ,className:"p-3 rounded-xl bg-rose-500 hover:bg-rose-400 transition-colors",title:"Cerrar sesi\xf3n",children:(0,a.jsx)(x.Z,{className:"w-5 h-5"})})]})]}),eA&&(0,a.jsxs)("div",{className:"bg-amber-50 border-b border-amber-200 px-6 py-3 flex items-center gap-2 text-amber-700",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Ten\xe9s cambios sin guardar"})]}),(0,a.jsx)("div",{className:"overflow-x-auto shadow-sm mt-2 scrollbar-thin",children:(0,a.jsx)("div",{className:"flex border-b border-cream-200 min-w-max",children:["site","products","services","booking","pedidos","mercadopago"].map(e=>(0,a.jsxs)("button",{onClick:()=>ej(e),className:"flex-1 py-4 px-4 font-medium transition-colors whitespace-nowrap ".concat(ef===e?"text-rose-600 border-b-2 border-rose-500 bg-rose-50":"text-nude-500 hover:text-rose-500"),children:["site"===e&&"⚙️ Negocio","products"===e&&"\uD83D\uDECD️ Productos","services"===e&&"\uD83D\uDC86 Servicios","booking"===e&&"\uD83D\uDCC5 Reservas","pedidos"===e&&"\uD83D\uDCE6 Pedidos","mercadopago"===e&&"\uD83D\uDCB3 MercadoPago"]},e))})}),(0,a.jsxs)("div",{className:"p-6",children:["site"===ef&&(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Informaci\xf3n de tu Negocio"}),(0,a.jsx)(B,{label:"Nombre de la p\xe1gina",help:"El nombre que aparece en el logo y t\xedtulo",value:el.siteName,onChange:e=>{eo({...el,siteName:e}),ez()},placeholder:"Ej: Corpe Pilates"}),(0,a.jsx)(B,{label:"Slogan",help:"Frase corta debajo del nombre",value:el.tagline,onChange:e=>{eo({...el,tagline:e}),ez()},placeholder:"Ej: Belleza Natural"}),(0,a.jsx)(B,{label:"Link de Instagram",help:"URL completa de tu perfil de Instagram",value:el.instagram,onChange:e=>{eo({...el,instagram:e}),ez()},placeholder:"https://instagram.com/tu_usuario",type:"url"}),(0,a.jsx)(B,{label:"N\xfamero de WhatsApp",help:"Solo n\xfameros, con c\xf3digo de pa\xeds (ej: 5491112345678)",value:el.whatsapp,onChange:e=>{eo({...el,whatsapp:e}),ez()},placeholder:"5491112345678",type:"tel"}),(0,a.jsx)(B,{label:"Email de contacto",help:"Email donde te contactan los clientes (tambi\xe9n se usa para recuperar contrase\xf1a)",value:el.email,onChange:e=>{eo({...el,email:e}),ez()},placeholder:"hola@ejemplo.com",type:"email"}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6 mt-6",children:[(0,a.jsx)("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4",children:"\uD83D\uDCCD Ubicaci\xf3n y Entregas"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(B,{label:"Ubicaci\xf3n del servicio (opcional)",help:"Direcci\xf3n donde atend\xe9s. Dejalo vac\xedo si no quer\xe9s mostrarlo.",value:el.location||"",onChange:e=>{eo({...el,location:e}),ez()},placeholder:"Ej: Av. Corrientes 1234, CABA"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:"Opciones de entrega de productos"}),(0,a.jsx)("p",{className:"text-xs text-nude-400 mb-2",children:"Configur\xe1 c\xf3mo coordin\xe1s la entrega de productos"}),(0,a.jsxs)("select",{value:el.deliveryMode||"both",onChange:e=>{eo({...el,deliveryMode:e.target.value}),ez()},className:"w-full px-4 py-3 rounded-xl border border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200 outline-none",children:[(0,a.jsx)("option",{value:"pickup",children:"Solo retiro en persona"}),(0,a.jsx)("option",{value:"shipping",children:"Solo env\xedos"}),(0,a.jsx)("option",{value:"both",children:"Retiro y env\xedos"})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6 mt-6",children:[(0,a.jsxs)("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"Seguridad"]}),O?(0,a.jsxs)("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200 space-y-4",children:[R?L?et?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-sage-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-sage-600"})}),(0,a.jsx)("p",{className:"text-sage-700 font-medium",children:"\xa1Contrase\xf1a actualizada!"}),(0,a.jsx)("button",{onClick:()=>{M(!1),q(!1),F(!1),U(""),G(""),$(""),ea(!1)},className:"mt-3 text-sm text-nude-500 hover:text-nude-700",children:"Cerrar"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm text-sage-600 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"})," C\xf3digo verificado. Ingres\xe1 tu nueva contrase\xf1a."]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:er?"text":"password",value:W,onChange:e=>G(e.target.value),placeholder:"Nueva contrase\xf1a (m\xedn. 6 caracteres)",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>en(!er),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:er?(0,a.jsx)(o.Z,{className:"w-5 h-5"}):(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:er?"text":"password",value:H,onChange:e=>$(e.target.value),placeholder:"Confirmar contrase\xf1a",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>en(!er),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:er?(0,a.jsx)(o.Z,{className:"w-5 h-5"}):(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("button",{onClick:async()=>{if(W!==H){es("Las contrase\xf1as no coinciden");return}if(W.length<6){es("M\xednimo 6 caracteres");return}X(!0),es("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"change_password",otp:J,newPassword:W})}),s=await e.json();s.success?(ea(!0),D(W)):es(s.error||"Error al cambiar la contrase\xf1a")}catch(e){es("Error de conexi\xf3n")}X(!1)},disabled:K||!W||!H,className:"w-full py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:K?"Guardando...":"Guardar nueva contrase\xf1a"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-sm text-nude-600",children:["Ingres\xe1 el c\xf3digo de 6 d\xedgitos enviado a ",(0,a.jsx)("strong",{children:Y})]}),(0,a.jsx)("input",{type:"text",value:J,onChange:e=>U(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full px-4 py-3 rounded-xl border border-cream-200 focus:border-rose-400 text-center text-2xl tracking-widest font-mono",maxLength:6}),(0,a.jsx)("button",{onClick:async()=>{X(!0),es("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verify_otp",otp:J})}),s=await e.json();s.verified?F(!0):es(s.error||"C\xf3digo inv\xe1lido")}catch(e){es("Error de conexi\xf3n")}X(!1)},disabled:K||6!==J.length,className:"w-full py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:K?"Verificando...":"Verificar c\xf3digo"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[(0,a.jsx)("button",{onClick:async()=>{X(!0),es("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request_otp"})}),s=await e.json();s.success?(es(""),U(""),alert("C\xf3digo reenviado a "+s.email)):es(s.error||"Error al reenviar")}catch(e){es("Error de conexi\xf3n")}X(!1)},disabled:K,className:"text-sm text-nude-500 hover:text-rose-600 transition-colors",children:"\xbfNo lleg\xf3? Reenviar c\xf3digo"}),(0,a.jsx)("button",{onClick:()=>{M(!1),q(!1),F(!1),U(""),G(""),$(""),es("")},className:"text-sm text-nude-500 hover:text-nude-700",children:"Cancelar"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm text-nude-600",children:"Te enviaremos un c\xf3digo de verificaci\xf3n al email de contacto configurado."}),(0,a.jsxs)("button",{onClick:async()=>{X(!0),es("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"request_otp"})}),s=await e.json();s.success?(q(!0),Q(s.email)):es(s.error||"Error al enviar el c\xf3digo")}catch(e){es("Error de conexi\xf3n")}X(!1)},disabled:K,className:"flex items-center gap-2 px-4 py-2 bg-rose-500 hover:bg-rose-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),K?"Enviando...":"Enviar c\xf3digo de verificaci\xf3n"]})]}),ee&&(0,a.jsxs)("p",{className:"text-rose-500 text-sm flex items-center gap-1",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"})," ",ee]})]}):(0,a.jsx)("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-nude-100 hover:bg-nude-200 text-nude-700 rounded-xl font-medium transition-colors",children:"Cambiar contrase\xf1a del panel"})]})]}),"products"===ef&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Tus Productos"}),(0,a.jsx)("p",{className:"text-nude-500 text-sm mt-1",children:"Accesorios, ropa, equipamiento y productos que vend\xe9s"})]}),(0,a.jsxs)("button",{onClick:()=>{ec([...ei,{id:"producto-".concat(Date.now()),name:"",description:"",price:0,category:"accesorios",image:"",featured:!1}]),ez()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-rose-500 text-white rounded-xl hover:bg-rose-600 transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Agregar Producto"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ei.map((e,s)=>(0,a.jsx)(z,{product:e,onUpdate:e=>eU(s,e),onRemove:()=>eV(s)},e.id)),0===ei.length&&(0,a.jsx)("div",{className:"text-center py-12 text-nude-400",children:'No hay productos. Hac\xe9 clic en "Agregar Producto" para empezar.'})]})]}),"services"===ef&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Tus Planes"}),(0,a.jsx)("p",{className:"text-nude-500 text-sm mt-1",children:"Planes de clases de Pilates que ofrec\xe9s"})]}),(0,a.jsxs)("button",{onClick:()=>{em([...ed,{id:"servicio-".concat(Date.now()),name:"",description:"",price:0,duration:"60 min",durationMinutes:60,image:""}]),ez()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-sage-500 text-white rounded-xl hover:bg-sage-600 transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Agregar Servicio"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ed.map((e,s)=>(0,a.jsx)(V,{service:e,onUpdate:e=>eW(s,e),onRemove:()=>eG(s)},e.id)),0===ed.length&&(0,a.jsx)("div",{className:"text-center py-12 text-nude-400",children:'No hay servicios. Hac\xe9 clic en "Agregar Servicio" para empezar.'})]})]}),"booking"===ef&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Configuraci\xf3n de Reservas"}),(0,a.jsx)("p",{className:"text-nude-500 text-sm mt-1",children:"Configur\xe1 los d\xedas y horarios disponibles para reservar turnos"})]}),(0,a.jsx)("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:ex.enabled,onChange:e=>{eu({...ex,enabled:e.target.checked}),ez()},className:"w-5 h-5 rounded border-cream-300 text-rose-500 focus:ring-rose-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-rose-800",children:"Habilitar sistema de reservas online"}),(0,a.jsx)("p",{className:"text-sm text-nude-500",children:"Los clientes podr\xe1n reservar y pagar turnos desde la web"})]})]})}),ex.enabled&&(0,a.jsx)(_,{recurring:ex.recurring||[],exceptions:ex.exceptions||[],reservations:eh,onUpdateRecurring:e=>{eu({...ex,recurring:e}),ez()},onUpdateExceptions:e=>{eu({...ex,exceptions:e}),ez()}})]}),"pedidos"===ef&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"Pedidos y Turnos"}),(0,a.jsx)("p",{className:"text-nude-500 text-sm mt-1",children:"Gesti\xf3n de entregas, turnos y compras"})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-amber-700 mb-3 flex items-center gap-2",children:["\uD83D\uDCE6 Productos a entregar (",eg.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[eg.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).sort((e,s)=>s.createdAt-e.createdAt).map(e=>(0,a.jsxs)("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-amber-800",children:e.customer.name}),(0,a.jsx)("p",{className:"text-xs text-amber-600",children:e.customer.phone})]}),(0,a.jsx)("p",{className:"text-xs text-amber-500",children:new Date(e.createdAt).toLocaleDateString("es-AR",{day:"numeric",month:"short"})})]}),(0,a.jsx)("div",{className:"space-y-1 mb-3",children:e.items.map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-amber-700",children:["• ",e.name," x",e.quantity]},s))}),(0,a.jsx)("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.id,deliveryStatus:"delivered"})}),eb(eg.map(s=>s.id===e.id?{...s,deliveryStatus:"delivered"}:s))},className:"w-full py-2 bg-amber-500 text-white rounded-lg text-sm font-medium hover:bg-amber-600 transition-colors",children:"✓ Marcar como entregado"})]},e.id)),0===eg.filter(e=>e.items.length>0&&"delivered"!==e.deliveryStatus).length&&(0,a.jsx)("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay productos pendientes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-sage-700 mb-3 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5"}),"Turnos agendados (",eh.filter(e=>"confirmed"===e.status).length+eg.flatMap(e=>e.selectedSlots.filter(e=>"completed"!==e.status&&"absent"!==e.status)).length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[[...eh.filter(e=>"confirmed"===e.status).map(e=>({type:"reservation",date:e.date,time:e.time,serviceName:e.serviceName,customerName:e.customerName,customerPhone:e.customerPhone,data:e,orderId:"",slotIndex:-1})),...eg.flatMap(e=>e.selectedSlots.map((s,t)=>({...s,slotIdx:t,order:e})).filter(e=>"completed"!==e.status&&"absent"!==e.status).map(s=>{var t;return{type:"order",date:s.date,time:s.time,serviceName:s.serviceName||(null===(t=e.serviceItems[0])||void 0===t?void 0:t.name)||"Servicio",customerName:e.customer.name,customerPhone:e.customer.phone,data:e,orderId:e.id,slotIndex:s.slotIdx}}))].sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()).map((e,s)=>(0,a.jsxs)("div",{className:"p-4 bg-sage-50 rounded-xl border border-sage-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sage-800",children:e.serviceName}),(0,a.jsx)("p",{className:"text-sm text-sage-600",children:e.customerName}),(0,a.jsx)("p",{className:"text-xs text-sage-500",children:e.customerPhone})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-sage-700",children:new Date(e.date+"T12:00:00").toLocaleDateString("es-AR",{day:"numeric",month:"short"})}),(0,a.jsx)("p",{className:"text-xs text-sage-500",children:e.time})]})]}),"reservation"===e.type?(0,a.jsx)("button",{onClick:()=>ew(e.data),className:"w-full py-2 bg-sage-200 text-sage-700 rounded-lg text-sm font-medium hover:bg-sage-300 transition-colors",children:"Ver detalles"}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderId,slotIndex:e.slotIndex,slotStatus:"completed"})}),eb(eg.map(s=>{if(s.id===e.orderId){let t=[...s.selectedSlots];return t[e.slotIndex]={...t[e.slotIndex],status:"completed"},{...s,selectedSlots:t}}return s}))},className:"flex-1 py-2 bg-sage-500 text-white rounded-lg text-sm font-medium hover:bg-sage-600 transition-colors",children:"✓ Cumplido"}),(0,a.jsx)("button",{onClick:async()=>{await fetch("/api/admin/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderId,slotIndex:e.slotIndex,slotStatus:"absent"})}),eb(eg.map(s=>{if(s.id===e.orderId){let t=[...s.selectedSlots];return t[e.slotIndex]={...t[e.slotIndex],status:"absent"},{...s,selectedSlots:t}}return s}))},className:"flex-1 py-2 bg-red-100 text-red-600 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:"✗ Ausente"})]})]},"".concat(e.type,"-").concat(s))),0===eh.filter(e=>"confirmed"===e.status).length&&0===eg.flatMap(e=>e.selectedSlots.filter(e=>"completed"!==e.status&&"absent"!==e.status)).length&&(0,a.jsx)("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay turnos pendientes"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-rose-700 mb-3 flex items-center gap-2",children:["\uD83D\uDECD️ Historial de compras (",eg.length,")"]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[eg.map(e=>{let s=0===e.items.length||"delivered"===e.deliveryStatus,t=0===e.selectedSlots.length||e.selectedSlots.every(e=>"completed"===e.status||"absent"===e.status),r=e.selectedSlots.some(e=>"absent"===e.status);return(0,a.jsx)("button",{onClick:()=>eN(e),className:"w-full text-left p-4 rounded-xl border transition-colors ".concat(s&&t&&!r?"bg-green-50 border-green-200 hover:border-green-300":r?"bg-red-50 border-red-200 hover:border-red-300":"bg-cream-50 border-cream-200 hover:border-rose-300"),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-rose-800",children:e.customer.name}),(0,a.jsxs)("p",{className:"text-sm text-nude-500",children:[e.items.length>0&&"".concat(e.items.length," prod."),e.items.length>0&&e.selectedSlots.length>0&&" + ",e.selectedSlots.length>0&&"".concat(e.selectedSlots.length," turno").concat(e.selectedSlots.length>1?"s":"")]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-rose-600",children:(0,k.T4)(e.total)}),(0,a.jsx)("p",{className:"text-xs text-nude-400",children:new Date(e.createdAt).toLocaleDateString("es-AR",{day:"numeric",month:"short"})})]})]})},e.id)}),0===eg.length&&(0,a.jsx)("p",{className:"text-nude-400 text-sm text-center py-8",children:"No hay compras registradas"})]})]})]}),ey&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>ew(null),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"font-display text-xl font-semibold text-rose-800",children:"Detalle del Turno"}),(0,a.jsx)("button",{onClick:()=>ew(null),className:"text-nude-400 hover:text-nude-600",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-sage-50 rounded-xl",children:[(0,a.jsx)("p",{className:"font-medium text-sage-800 text-lg",children:ey.serviceName}),(0,a.jsx)("p",{className:"text-sage-600",children:(0,k.T4)(ey.servicePrice)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase",children:"Fecha"}),(0,a.jsx)("p",{className:"font-medium text-nude-700",children:new Date(ey.date+"T12:00:00").toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase",children:"Horario"}),(0,a.jsxs)("p",{className:"font-medium text-nude-700",children:[ey.time," - ",ey.endTime]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Cliente"}),(0,a.jsx)("p",{className:"font-medium",children:ey.customerName}),(0,a.jsx)("p",{className:"text-sm text-nude-600",children:ey.customerEmail}),(0,a.jsx)("p",{className:"text-sm text-nude-600",children:ey.customerPhone})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("a",{href:"https://wa.me/".concat(null===(e=ey.customerPhone)||void 0===e?void 0:e.replace(/\D/g,"")),target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-500 text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors",children:"WhatsApp"}),(0,a.jsx)("a",{href:"mailto:".concat(ey.customerEmail),className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-lg text-center text-sm font-medium hover:bg-rose-200 transition-colors",children:"Email"})]})]})]})}),ev&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>eN(null),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"font-display text-xl font-semibold text-rose-800",children:"Detalle de Compra"}),(0,a.jsx)("button",{onClick:()=>eN(null),className:"text-nude-400 hover:text-nude-600",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ev.items.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Productos"}),(0,a.jsx)("div",{className:"space-y-2",children:ev.items.map((e,s)=>(0,a.jsx)("div",{className:"p-3 bg-cream-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{children:[e.name," x",e.quantity]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:(0,k.T4)(e.price*e.quantity)}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("delivered"===ev.deliveryStatus?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:"delivered"===ev.deliveryStatus?"✓ Entregado":"⏳ Pendiente"})]})]})},s))})]}),ev.serviceItems.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Servicios"}),(0,a.jsx)("div",{className:"space-y-2",children:ev.serviceItems.map((e,s)=>{let t=ev.selectedSlots[s];return(0,a.jsxs)("div",{className:"p-3 bg-sage-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("span",{children:[e.name," x",e.quantity]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:(0,k.T4)(e.price*e.quantity)}),t&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("completed"===t.status?"bg-green-100 text-green-700":"absent"===t.status?"bg-red-100 text-red-700":"bg-sage-200 text-sage-700"),children:"completed"===t.status?"✓ Cumplido":"absent"===t.status?"✗ Ausente":"⏳ Pendiente"})]})]}),t&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-sage-600",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date(t.date+"T12:00:00").toLocaleDateString("es-AR",{weekday:"short",day:"numeric",month:"short"})}),(0,a.jsx)(f.Z,{className:"w-4 h-4 ml-1"}),(0,a.jsx)("span",{children:t.time})]})]},s)})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-rose-100 rounded-xl",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total"}),(0,a.jsx)("span",{className:"text-xl font-bold text-rose-700",children:(0,k.T4)(ev.total)})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("p",{className:"text-xs text-nude-400 uppercase mb-2",children:"Cliente"}),(0,a.jsx)("p",{className:"font-medium",children:ev.customer.name}),(0,a.jsx)("p",{className:"text-sm text-nude-600",children:ev.customer.email}),(0,a.jsx)("p",{className:"text-sm text-nude-600",children:ev.customer.phone})]}),(0,a.jsx)("p",{className:"text-xs text-nude-400 text-center",children:new Date(ev.createdAt).toLocaleString("es-AR")}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("a",{href:"https://wa.me/".concat(null===(s=ev.customer.phone)||void 0===s?void 0:s.replace(/\D/g,"")),target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-500 text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors",children:"WhatsApp"}),(0,a.jsx)("a",{href:"mailto:".concat(ev.customer.email),className:"flex-1 py-2 bg-rose-100 text-rose-600 rounded-lg text-center text-sm font-medium hover:bg-rose-200 transition-colors",children:"Email"})]})]})]})})]}),"mercadopago"===ef&&(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold text-rose-800",children:"MercadoPago"}),(0,a.jsx)("p",{className:"text-nude-500 text-sm mt-1",children:"Configuraci\xf3n de pagos y comisiones"})]}),!eR.developmentPaid&&(0,a.jsx)("div",{className:"p-6 bg-amber-50 rounded-xl border border-amber-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h3",{className:"font-medium text-amber-800 mb-1",children:["Comisi\xf3n activa: ",eR.percentage,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-amber-700 mb-4",children:["Se cobra una comisi\xf3n del ",eR.percentage,"% en cada venta. Pagando el desarrollo, elimin\xe1s esta comisi\xf3n para siempre."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg mb-4",children:[(0,a.jsx)("span",{className:"font-medium text-amber-800",children:"Pago \xfanico"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-amber-700",children:"$300.000"})]}),(0,a.jsxs)("button",{onClick:async()=>{eF(!0);try{let e=await fetch("/api/checkout/development",{method:"POST"}),s=await e.json();s.init_point&&(window.location.href=s.init_point)}catch(e){alert("Error al crear el pago")}eF(!1)},disabled:eL,className:"w-full py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),eL?"Procesando...":"Pagar y eliminar comisi\xf3n"]})]})]})}),eR.developmentPaid&&(0,a.jsx)("div",{className:"p-6 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-sage-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-sage-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-sage-800",children:"\xa1Desarrollo pagado!"}),(0,a.jsx)("p",{className:"text-sm text-sage-600",children:"No se cobra ninguna comisi\xf3n en tus ventas"})]})]})}),(0,a.jsxs)("div",{className:"border-t border-cream-200 pt-6",children:[(0,a.jsx)("h3",{className:"font-display text-lg font-semibold text-rose-800 mb-4",children:"Conexi\xf3n de cuenta"}),eZ.connected?(0,a.jsx)("div",{className:"p-4 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-sage-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-sage-800",children:"Cuenta conectada"}),(0,a.jsxs)("p",{className:"text-sm text-sage-600",children:["ID: ",eZ.userId]})]})]}),(0,a.jsxs)("button",{onClick:async()=>{confirm("\xbfSeguro que quer\xe9s desconectar tu cuenta?")&&(eM(!0),await fetch("/api/oauth/status",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:"disconnect"})}),eI({connected:!1}),eM(!1))},disabled:eO,className:"text-rose-500 hover:text-rose-700 text-sm flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"Desconectar"]})]})}):(0,a.jsx)("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-rose-800",children:"No hay cuenta conectada"}),(0,a.jsx)("p",{className:"text-sm text-nude-500",children:"Conect\xe1 tu MercadoPago para recibir pagos"})]}),(0,a.jsxs)("a",{href:"/api/oauth/connect",className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Conectar"]})]})})]}),(0,a.jsxs)("div",{className:"p-4 bg-nude-50 rounded-xl border border-nude-200",children:[(0,a.jsx)("h4",{className:"font-medium text-nude-700 mb-2",children:"\uD83D\uDCA1 \xbfC\xf3mo funciona?"}),(0,a.jsxs)("ul",{className:"text-sm text-nude-600 space-y-1",children:[(0,a.jsx)("li",{children:"• Conect\xe1s tu cuenta de MercadoPago"}),(0,a.jsx)("li",{children:"• Los clientes pagan y el dinero va a tu cuenta"}),!eR.developmentPaid&&(0,a.jsxs)("li",{children:["• Se cobra ",eR.percentage,"% de comisi\xf3n hasta pagar el desarrollo"]}),eR.developmentPaid&&(0,a.jsx)("li",{children:"• ✅ Sin comisiones - desarrollo pagado"})]})]})]})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-50 to-cream-100 p-4",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-rose-500"})}),(0,a.jsx)("h1",{className:"font-display text-2xl font-semibold text-rose-800",children:"Panel de Admin"}),(0,a.jsx)("p",{className:"text-nude-500 mt-2",children:"Ingres\xe1 tu contrase\xf1a para continuar"})]}),(0,a.jsxs)("form",{onSubmit:e_,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:A?"text":"password",value:w,onChange:e=>S(e.target.value),placeholder:"Contrase\xf1a",className:"w-full px-4 py-3 pr-12 rounded-xl border border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200 outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>E(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-nude-400 hover:text-rose-500",children:A?(0,a.jsx)(o.Z,{className:"w-5 h-5"}):(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),P&&(0,a.jsx)("p",{className:"text-rose-500 text-sm text-center",children:P}),(0,a.jsx)("button",{type:"submit",className:"w-full py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 transition-colors",children:"Ingresar"})]})]})})})}function B(e){let{label:s,help:t,value:r,onChange:n,placeholder:l,type:o="text"}=e,i=function(e,s){if(!e||""===e.trim())return{valid:!0};switch(s){case"url":try{return new URL(e),{valid:!0}}catch(e){return{valid:!1,error:"Ingres\xe1 una URL v\xe1lida (ej: https://instagram.com/usuario)"}}case"tel":let t=e.replace(/[\s\-\(\)\.]/g,"");if(!/^\+?\d+$/.test(t))return{valid:!1,error:"Solo n\xfameros (sin espacios ni guiones)"};if(t.length<8)return{valid:!1,error:"El n\xfamero es muy corto (m\xednimo 8 d\xedgitos)"};if(t.length>15)return{valid:!1,error:"El n\xfamero es muy largo (m\xe1ximo 15 d\xedgitos)"};return{valid:!0};case"email":if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{valid:!1,error:"Ingres\xe1 un email v\xe1lido (ej: contacto@ejemplo.com)"};return{valid:!0};default:return{valid:!0}}}(r,o),c=!i.valid&&r.length>0;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-rose-700 mb-1",children:s}),t&&(0,a.jsx)("p",{className:"text-xs text-nude-400 mb-2",children:t}),(0,a.jsx)("input",{type:"tel"===o?"text":o,value:r,onChange:e=>n(e.target.value),placeholder:l,className:"w-full px-4 py-3 rounded-xl border outline-none transition-all ".concat(c?"border-red-400 focus:border-red-500 focus:ring-2 focus:ring-red-200 bg-red-50":"border-cream-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-200")}),c&&(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"inline-block w-1 h-1 bg-red-500 rounded-full"}),i.error]}),i.valid&&r.length>0&&("url"===o||"tel"===o||"email"===o)&&(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"inline-block w-1 h-1 bg-green-500 rounded-full"}),"✓ V\xe1lido"]})]})}function z(e){var s;let{product:t,onUpdate:l,onRemove:o}=e,[i,c]=(0,r.useState)(!1),d=(0,r.useRef)(null),m=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;c(!0);let a=new FormData;a.append("file",t);try{let e=await fetch("/api/upload",{method:"POST",body:a}),s=await e.json();s.url?l({image:s.url}):alert(s.error||"Error al subir imagen")}catch(e){alert("Error al subir imagen")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"p-4 sm:p-5 rounded-xl border ".concat(t.paused?"bg-amber-50 border-amber-200":"bg-cream-50 border-cream-200"),children:[t.paused&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-700 text-sm mb-3 font-medium",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Producto pausado - no visible en la tienda"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-xl bg-white border-2 border-dashed flex items-center justify-center overflow-hidden cursor-pointer transition-colors ".concat(t.paused?"border-amber-300 hover:border-amber-400 opacity-60":"border-cream-300 hover:border-rose-400"),onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},children:i?(0,a.jsx)(n.Z,{className:"w-6 h-6 text-rose-400 animate-spin"}):t.image?(0,a.jsx)("img",{src:t.image,alt:"",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"text-center p-2",children:[(0,a.jsx)(w.Z,{className:"w-6 h-6 text-cream-400 mx-auto"}),(0,a.jsx)("span",{className:"text-xs text-cream-400 mt-1 block",children:"Subir foto"})]})}),(0,a.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden"})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"text",value:t.name,onChange:e=>l({name:e.target.value}),placeholder:"Nombre del producto",className:"flex-1 px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none text-rose-800 font-medium"}),(0,a.jsx)("button",{onClick:o,className:"p-2 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar producto",children:(0,a.jsx)(S.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-nude-500 mb-1",children:"Precio (ARS)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-nude-400",children:"$"}),(0,a.jsx)("input",{type:"number",value:t.price||"",onChange:e=>l({price:parseInt(e.target.value)||0}),placeholder:"0",className:"w-full pl-7 pr-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none"})]}),t.price>0&&(0,a.jsxs)("span",{className:"text-xs text-sage-600 mt-1 block",children:["Se muestra: ",(0,k.T4)(t.price)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-nude-500 mb-1",children:"Categor\xeda"}),(0,a.jsxs)("select",{value:t.category,onChange:e=>l({category:e.target.value}),className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none",children:[(0,a.jsx)("option",{value:"accesorios",children:"\uD83C\uDFAF Accesorios"}),(0,a.jsx)("option",{value:"ropa",children:"\uD83D\uDC55 Ropa"}),(0,a.jsx)("option",{value:"equipamiento",children:"\uD83C\uDFCB️ Equipamiento"}),(0,a.jsx)("option",{value:"suplementos",children:"\uD83D\uDC8A Suplementos"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.featured,onChange:e=>l({featured:e.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-rose-500 focus:ring-rose-400"}),(0,a.jsx)("span",{className:"text-sm text-rose-700",children:"⭐ Destacado"})]})}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("button",{type:"button",onClick:()=>l({paused:!t.paused}),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t.paused?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-sage-100 text-sage-700 hover:bg-sage-200"),children:[t.paused?(0,a.jsx)(C.Z,{className:"w-4 h-4"}):(0,a.jsx)(y.Z,{className:"w-4 h-4"}),t.paused?"Activar":"Pausar"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-nude-500 mb-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.trackStock,onChange:e=>l({trackStock:e.target.checked,stock:e.target.checked?t.stock||0:void 0}),className:"w-3 h-3 rounded border-cream-300 text-rose-500"}),"Controlar stock"]}),t.trackStock&&(0,a.jsx)("input",{type:"number",value:null!==(s=t.stock)&&void 0!==s?s:"",onChange:e=>l({stock:parseInt(e.target.value)||0}),placeholder:"0",min:"0",className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-nude-500 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:t.description,onChange:e=>l({description:e.target.value}),placeholder:"Describ\xed brevemente...",rows:2,className:"w-full px-3 py-2 rounded-lg border border-cream-200 focus:border-rose-400 outline-none resize-none"})]})]})]})]})]})}function U(e){if(e<60)return"".concat(e," min");let s=Math.floor(e/60),t=e%60;return 0===t?1===s?"1 hora":"".concat(s," horas"):"".concat(s,"h ").concat(t,"min")}function V(e){let{service:s,onUpdate:t,onRemove:l}=e,[o,i]=(0,r.useState)(!1),c=(0,r.useRef)(null),d=async e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;i(!0);let r=new FormData;r.append("file",a);try{let e=await fetch("/api/upload",{method:"POST",body:r}),s=await e.json();s.url?t({image:s.url}):alert(s.error||"Error al subir imagen")}catch(e){alert("Error al subir imagen")}finally{i(!1)}};return(0,a.jsx)("div",{className:"p-4 sm:p-5 bg-sage-50 rounded-xl border border-sage-200",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-xl bg-white border-2 border-dashed border-sage-300 flex items-center justify-center overflow-hidden cursor-pointer hover:border-sage-400 transition-colors",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},children:o?(0,a.jsx)(n.Z,{className:"w-6 h-6 text-sage-400 animate-spin"}):s.image?(0,a.jsx)("img",{src:s.image,alt:"",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"text-center p-2",children:[(0,a.jsx)(w.Z,{className:"w-6 h-6 text-sage-300 mx-auto"}),(0,a.jsx)("span",{className:"text-xs text-sage-400 mt-1 block",children:"Subir foto"})]})}),(0,a.jsx)("input",{ref:c,type:"file",accept:"image/*",onChange:d,className:"hidden"})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"text",value:s.name,onChange:e=>t({name:e.target.value}),placeholder:"Nombre del servicio",className:"flex-1 px-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none text-sage-800 font-medium"}),(0,a.jsx)("button",{onClick:l,className:"p-2 text-rose-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar servicio",children:(0,a.jsx)(S.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-nude-500 mb-1",children:"Precio (ARS)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-nude-400",children:"$"}),(0,a.jsx)("input",{type:"number",value:s.price||"",onChange:e=>t({price:parseInt(e.target.value)||0}),placeholder:"0",className:"w-full pl-7 pr-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none"})]}),s.price>0&&(0,a.jsxs)("span",{className:"text-xs text-sage-600 mt-1 block",children:["Se muestra: ",(0,k.T4)(s.price)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-nude-500 mb-1",children:["Duraci\xf3n: ",U(s.durationMinutes||60)]}),(0,a.jsx)("input",{type:"range",min:5,max:240,step:5,value:s.durationMinutes||60,onChange:e=>{let s=parseInt(e.target.value);t({durationMinutes:s,duration:U(s)})},className:"w-full h-2 bg-sage-200 rounded-lg appearance-none cursor-pointer accent-sage-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-nude-400 mt-1",children:[(0,a.jsx)("span",{children:"5 min"}),(0,a.jsx)("span",{children:"4 horas"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-nude-500 mb-1",children:"Descripci\xf3n"}),(0,a.jsx)("textarea",{value:s.description,onChange:e=>t({description:e.target.value}),placeholder:"Describ\xed brevemente el servicio...",rows:2,className:"w-full px-3 py-2 rounded-lg border border-sage-200 focus:border-sage-400 outline-none resize-none"})]})]})]})})}},6397:function(e,s,t){"use strict";t.d(s,{T4:function(){return n},bd:function(){return r},sb:function(){return l},u_:function(){return a}});let a={site:{siteName:"Corpe Pilates",tagline:"Pilates Reformer para todos",instagram:"https://instagram.com/corpepilates",whatsapp:"5491161515110",email:"corpepilates@gmail.com",location:"Avenida Segurola 386, Floresta, CABA",deliveryMode:"pickup"},booking:{enabled:!0,recurring:[{dayOfWeek:2,slots:[{start:"18:00",end:"19:00"}]},{dayOfWeek:5,slots:[{start:"18:00",end:"19:00"}]}],exceptions:[]},products:[],services:[{id:"plan-1x",name:"Plan 1x Semana",description:"4 clases mensuales de Pilates Reformer. Ideal para iniciarte en la pr\xe1ctica y trabajar tu core, postura y fuerza general.",price:25e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1518611012118-696072aa579a?w=400&h=400&fit=crop"},{id:"plan-2x",name:"Plan 2x Semana",description:"8 clases mensuales de Pilates Reformer. Perfecto para progresar m\xe1s r\xe1pido y sentir resultados en pocas semanas.",price:4e4,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400&h=400&fit=crop"},{id:"plan-3x",name:"Plan 3x Semana",description:"12 clases mensuales de Pilates Reformer. M\xe1ximos resultados: mayor fuerza, flexibilidad y cuidado de tu columna.",price:55e3,duration:"60 min",durationMinutes:60,image:"https://images.unsplash.com/photo-1599901860904-17e6ed7083a0?w=400&h=400&fit=crop"}]},r=[{id:"accesorios",name:"Accesorios",icon:"\uD83C\uDFAF"},{id:"ropa",name:"Ropa",icon:"\uD83D\uDC55"},{id:"equipamiento",name:"Equipamiento",icon:"\uD83C\uDFCB️"},{id:"suplementos",name:"Suplementos",icon:"\uD83D\uDC8A"}];function n(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}let l=[{id:0,name:"Domingo",short:"Dom"},{id:1,name:"Lunes",short:"Lun"},{id:2,name:"Martes",short:"Mar"},{id:3,name:"Mi\xe9rcoles",short:"Mi\xe9"},{id:4,name:"Jueves",short:"Jue"},{id:5,name:"Viernes",short:"Vie"},{id:6,name:"S\xe1bado",short:"S\xe1b"}]}},function(e){e.O(0,[710,971,117,744],function(){return e(e.s=3997)}),_N_E=e.O()}]);